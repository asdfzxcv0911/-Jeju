<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>æ¿Ÿå·å³¶8å¤©7å¤œè¦ªå­éŠ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- å¼•å…¥ Noto Sans TC, Gaegu -->
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/locale/zh-tw.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'hand': ['Gaegu', 'cursive'],
                        'sans': ['Noto Sans TC', 'sans-serif'],
                        'kaiti': ['KaiTi', 'BiauKai', 'DFKai-SB', 'serif'],
                    },
                    colors: {
                        'jeju-orange': '#FF8C42',
                        'jeju-yellow': '#FFD93D',
                        'jeju-green': '#6BCB77',
                        'jeju-blue': '#4D96FF',
                        'paper': '#FFFDF7',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-image: url('https://images.unsplash.com/photo-1548115184-bc6544d06a58?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Noto Sans TC', sans-serif;
            overflow-y: scroll;
        }

        .journal-shadow {
            box-shadow: 
                0 1px 1px rgba(0,0,0,0.15), 
                0 10px 0 -5px #eee, 
                0 10px 1px -4px rgba(0,0,0,0.15), 
                0 20px 0 -10px #eee, 
                0 20px 1px -9px rgba(0,0,0,0.15);
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .sticker-tab {
            transition: transform 0.2s, background-color 0.2s;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 95% 100%, 5% 100%, 0 90%);
        }
        .sticker-tab:active { transform: translateY(0); }
        
        .sticker-tab.active {
            background-color: #FFD93D !important;
            color: #374151 !important;
            transform: translateY(-3px);
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
            border-bottom: none;
        }

        .washi-tape-title {
            position: relative;
            background-color: rgba(255, 225, 150, 0.6);
            padding: 0.2em 1em;
            transform: rotate(-1deg);
            display: inline-block;
            box-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .washi-tape-title::before, .washi-tape-title::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 100%;
            top: 0;
            background-color: rgba(255,255,255,0.4);
            mask-image: url("data:image/svg+xml,%3Csvg width='20' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0 L20 0 L18 5 L20 10 L18 15 L20 20 L18 25 L20 30 L18 35 L20 40 L0 40 Z' fill='black'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg width='20' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0 L20 0 L18 5 L20 10 L18 15 L20 20 L18 25 L20 30 L18 35 L20 40 L0 40 Z' fill='black'/%3E%3C/svg%3E");
        }
        .washi-tape-title::before { left: -10px; transform: scaleX(-1); }
        .washi-tape-title::after { right: -10px; }

        .hand-font { font-family: 'Gaegu', cursive; }
        
        .live-title { animation: float-title 3s ease-in-out infinite; }
        @keyframes float-title {
            0%, 100% { transform: translateY(0) rotate(-1deg); }
            50% { transform: translateY(-3px) rotate(1deg); }
        }

        .details-expand {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .details-expand.show {
            max-height: 2000px;
            transition: max-height 0.5s ease-in;
        }

        .custom-checkbox {
            appearance: none;
            background-color: #fff;
            margin: 0;
            font: inherit;
            color: currentColor;
            width: 1.4em;
            height: 1.4em;
            border: 2px solid #555;
            border-radius: 0.3em;
            display: grid;
            place-content: center;
            cursor: pointer;
            transform: translateY(-0.075em);
        }
        .custom-checkbox::before {
            content: "";
            width: 0.8em;
            height: 0.8em;
            transform: scale(0);
            transition: 120ms transform ease-in-out;
            box-shadow: inset 1em 1em #FF8C42;
            transform-origin: center;
            clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
        }
        .custom-checkbox:checked::before { transform: scale(1); }
        .custom-checkbox:checked + span {
            text-decoration: line-through;
            color: #aaa;
            font-style: italic;
        }

        .polaroid-card {
            background: white;
            padding: 10px 10px 40px 10px;
            box-shadow: 2px 3px 8px rgba(0,0,0,0.15);
            transition: transform 0.3s;
            position: relative;
        }
        
        .polaroid-img { filter: sepia(10%) contrast(105%) saturate(110%); }

        .masking-tape {
            position: absolute;
            height: 30px;
            width: 80px;
            top: -10px;
            left: 50%;
            transform: translateX(-50%) rotate(-2deg);
            background-color: rgba(255, 255, 255, 0.4);
            border-left: 2px dashed rgba(0,0,0,0.05);
            border-right: 2px dashed rgba(0,0,0,0.05);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            opacity: 0.8;
            z-index: 25;
        }
        .masking-tape.tape-yellow { background-color: rgba(255, 217, 61, 0.7); }
        .masking-tape.tape-blue { background-color: rgba(77, 150, 255, 0.7); }
        .masking-tape.tape-green { background-color: rgba(107, 203, 119, 0.7); }
        .masking-tape.tape-pink { background-color: rgba(255, 154, 158, 0.7); }

        .modal-overlay {
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }
        .modal-content {
            animation: modalPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes modalPop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body class="min-h-screen pb-10 overflow-x-hidden text-slate-800">

    <!-- Modal -->
    <div id="info-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 modal-overlay" onclick="closeModal()">
        <div class="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl modal-content border-4 border-jeju-yellow relative max-h-[85vh] overflow-y-auto hide-scrollbar" onclick="event.stopPropagation()">
            <button onclick="closeModal()" class="absolute top-2 right-2 text-slate-400 hover:text-slate-600 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center z-10">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-content-area" class="text-center"></div>
        </div>
    </div>

    <!-- é ‚éƒ¨æ¨™é¡Œèˆ‡å€’æ•¸ -->
    <div class="max-w-md mx-auto pt-6 pb-2 text-center px-4 relative z-10">
        <div class="inline-block bg-white/90 backdrop-blur px-6 py-3 rounded-2xl shadow-lg border-4 border-jeju-orange live-title w-full">
            <h1 class="text-2xl font-black text-slate-800 tracking-wider font-kaiti">
                <span class="text-jeju-orange">æ¿Ÿå·å³¶</span> 8å¤©7å¤œè¦ªå­éŠ <i class="fas fa-plane-departure text-jeju-blue"></i>
            </h1>
            <div class="mt-2 flex flex-col items-center justify-center gap-2 text-slate-600 font-medium">
                <span class="bg-jeju-yellow px-3 py-1 rounded-full text-slate-800 border-2 border-slate-800 border-dashed font-hand text-lg font-bold">
                    <i class="fas fa-calendar-alt mr-1"></i> 2026.01.30 - 02.06
                </span>
                <span id="countdown" class="bg-jeju-blue text-white px-4 py-1 rounded-full font-hand text-lg tracking-widest shadow-sm">
                    D-Day è¨ˆç®—ä¸­...
                </span>
            </div>
        </div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="max-w-md mx-auto px-2">
        <div class="flex flex-col gap-1 px-1 pb-1" id="tab-menu" style="margin-bottom: -10px; padding-top: 5px;">
            <!-- é¸å–®ç”± JS ç”Ÿæˆ -->
        </div>

        <main class="bg-paper rounded-2xl p-4 min-h-[70vh] relative journal-shadow border-t-8 border-jeju-yellow mb-10">
            <div class="absolute top-3 left-3 text-red-400 text-xl drop-shadow-md z-20"><i class="fas fa-thumbtack"></i></div>
            <div class="absolute top-3 right-3 text-jeju-blue text-xl drop-shadow-md z-20"><i class="fas fa-paperclip"></i></div>
            <div id="content-area" class="relative z-10"></div>
        </main>
    </div>

    <script>
        const tripStartDate = "2026-01-30";
        let currentExchangeRate = 0; 
        let weatherDataCache = null; 

        // Day 1 Data
        const day1Events = [
            {
                type: 'start', time: '13:30', duration: 90, travelTime: 60, travelMode: 'walk', 
                title: 'å—è‹‘è²´è³“å®¤ VIP Lounge', desc: 'åƒé£½å–è¶³ï¼Œæº–å‚™å‡ºç™¼ï¼(KHH)',
                icon: 'fa-utensils', bg: 'bg-blue-100',
                btnText: 'æ€éº¼å»?', btnAction: 'showLoungeGuide', navQuery: '',
                externalLink: 'https://orange.udn.com/orange/story/121417/9179081'
            },
            {
                type: 'flight', time: '16:00', duration: 145, travelTime: 0, travelMode: 'plane',
                title: 'å¿«æ¨‚èµ·èˆª (IT670)', desc: '16:00 KHH âœˆï¸ 19:25 CJU (å«æ™‚å·®)',
                icon: 'fa-plane-departure', bg: 'bg-orange-100', isFlight: true, navQuery: ''
            },
            {
                type: 'arrive', time: '19:25', duration: 60, travelTime: 15, travelMode: 'walk',
                title: 'æŠµé”æ¿Ÿå· & å…¥å¢ƒ', desc: 'å¡«å¯«å…¥å¢ƒå¡ã€æé ˜è¡Œæ',
                icon: 'fa-passport', bg: 'bg-green-100', note: 'é è¨ˆ 20:25 å®Œæˆ', navQuery: ''
            },
            {
                type: 'car', time: 'auto', duration: 30, travelTime: 15, travelMode: 'car',
                title: 'The Safe Rent A Car', desc: 'æ­æ¥é§è»Šå‰å¾€å–è»Š',
                icon: 'fa-car', bg: 'bg-yellow-100', btnText: 'å–è»ŠæŒ‡å¼•', btnAction: 'showCarGuide', navQuery: 'ë©”ì¢…ê¸€ë˜ë“œ ì œì£¼'
            },
            {
                type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null,
                title: 'æ¿Ÿå· Glad Maison é£¯åº—', desc: 'Check-in ä¼‘æ¯',
                icon: 'fa-bed', bg: 'bg-purple-100', navQuery: ''
            }
        ];

        // Day 2 Data
        const day2Events = [
            {
                type: 'start', time: '08:00', duration: 0, travelTime: 50, travelMode: 'car', 
                title: 'é£¯åº—å‡ºç™¼', desc: 'æ—©èµ·å‡ºç™¼å»åƒè²æœï¼',
                icon: 'fa-sun', bg: 'bg-yellow-100', navQuery: 'ëŸ°ë˜ë² ì´ê¸€ë®¤ì§€ì—„ ì œì£¼'
            },
            {
                type: 'spot', time: 'auto', duration: 90, travelTime: 15, travelMode: 'car', 
                title: 'å€«æ•¦è²æœåšç‰©é¤¨', desc: 'London Bagel Museum Jeju (éœ€æ’éšŠ)',
                icon: 'fa-bread-slice', bg: 'bg-orange-100', note: 'ç‡Ÿæ¥­æ™‚é–“: 08:00 - 18:00',
                customButtons: [{ text: 'Catch Table é ç´„', link: 'https://www.catchtable.net/zh-TW/shop/london_bagel_museum_jeju', icon: 'fa-calendar-check', color: 'red' }],
                navQuery: 'í•´ë…€ê¹€ë°¥ ë³¸ì '
            },
            {
                type: 'food', time: 'auto', duration: 30, travelTime: 5, travelMode: 'walk', 
                title: 'æµ·å¥³é£¯æ² (å¯å¤–å¸¶)', desc: 'Haenyeo Gimbap',
                icon: 'fa-utensils', bg: 'bg-blue-100', note: 'ç‡Ÿæ¥­æ™‚é–“: 09:00 - 14:45',
                navQuery: 'ì˜¤ë“œë‘ë² ì´ì»¤ë¦¬' 
            },
            {
                type: 'spot', time: 'auto', duration: 60, travelTime: 30, travelMode: 'car', 
                title: 'Audrant Bakery & å’¸å¾·æµ·ç˜', desc: 'å¿…åƒå¤§è’œéºµåŒ… & çµ•ç¾æœå‡æµ·',
                icon: 'fa-umbrella-beach', bg: 'bg-sky-100', note: 'ç‡Ÿæ¥­æ™‚é–“: 07:00 - 22:00',
                customButtons: [{ text: 'ä»‹ç´¹', link: 'https://dpm2bb.com/2025-62/', icon: 'fa-globe', color: 'orange' }],
                navQuery: 'ì—ì½”ëœë“œ í…Œë§ˆíŒŒí¬' 
            },
            {
                type: 'spot', time: 'auto', duration: 120, travelTime: 25, travelMode: 'car', 
                title: 'ECOLAND æ£®æ—å°ç«è»Š', desc: 'æ­ç«è»ŠéŠæ£®æ—ï¼Œè¼•é¬†æ„œæ„',
                icon: 'fa-train', bg: 'bg-green-100', note: 'å†¬å­£ç‡Ÿæ¥­: 08:30 - 16:30 (æœ€å¾Œå…¥å ´)',
                btnText: 'ç¥¨åƒ¹è³‡è¨Š', btnAction: 'showEcoLandPrice', // æ–°å¢æŒ‰éˆ•
                navQuery: 'ì œì£¼ë ˆì¼ë°”ì´í¬' 
            },
            {
                type: 'activity', time: 'auto', duration: 90, travelTime: 25, travelMode: 'car', 
                title: 'æ¿Ÿå·éµé“è‡ªè¡Œè»Š', desc: 'Jeju Rail Bike (è‡ªå‹•è¡Œé§›)',
                icon: 'fa-bicycle', bg: 'bg-pink-100', note: 'ç‡Ÿæ¥­æ™‚é–“: 09:00 - 17:30 (æ¯æ•´é»å‡ºç™¼)',
                btnText: 'ç¥¨åƒ¹è³‡è¨Š', btnAction: 'showRailBikePrice', // æ–°å¢æŒ‰éˆ•
                navQuery: 'ì‚¼ë‹¬ë¦¬' 
            },
            {
                type: 'spot', time: 'auto', duration: 45, travelTime: 20, travelMode: 'car', 
                title: 'ä¸‰é”é‡Œå°æ‘ & Doldam Carrot', desc: 'éŸ“åŠ‡ã€Šæ­¡è¿å›åˆ°ä¸‰é”é‡Œã€‹æ‹æ”åœ°',
                icon: 'fa-camera', bg: 'bg-yellow-50', navQuery: 'ë¶€ì´Œì‹ë‹¹' 
            },
            {
                type: 'dinner', time: 'auto', duration: 60, travelTime: 10, travelMode: 'car', 
                title: 'æ™šé¤ - å¯Œæ‘é£Ÿå ‚', desc: 'Buchon Sikdang (ç™½å¸¶é­š/é¯–é­š)',
                icon: 'fa-fish', bg: 'bg-orange-100', note: 'ç‡Ÿæ¥­æ™‚é–“: 10:30 - 21:00',
                navQuery: 'ì½”ì—…ì‹œí‹°í˜¸í…” ì„±ì‚°' 
            },
            {
                type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null, 
                title: 'æ¿Ÿå·åŸå±±è²æ–¯ç‰¹é£¯åº—', desc: 'Coop City Hotel Seongsan',
                icon: 'fa-bed', bg: 'bg-purple-100', navQuery: ''
            }
        ];

        const tabs = [
            { id: 'flight', icon: 'fa-paper-plane', label: 'èˆªç­', color: 'bg-blue-100' },
            { id: 'rate', icon: 'fa-won-sign', label: 'åŒ¯ç‡', color: 'bg-yellow-100' },
            { id: 'weather', icon: 'fa-sun', label: 'æ°£è±¡', color: 'bg-sky-100' },
            { id: 'intro', icon: 'fa-map-marked-alt', label: 'æ™¯é»', color: 'bg-orange-100' },
            { id: 'prep', icon: 'fa-check-circle', label: 'æº–å‚™', color: 'bg-green-100' },
            { id: 'booking', icon: 'fa-file-alt', label: 'æ†‘è­‰', color: 'bg-purple-100' }, 
            { id: 'day1', label: 'Day1', date: '1/30', week: '(äº”)', color: 'bg-red-50' },
            { id: 'day2', label: 'Day2', date: '1/31', week: '(å…­)', color: 'bg-red-50' },
            { id: 'day3', label: 'Day3', date: '2/01', week: '(æ—¥)', color: 'bg-red-50' },
            { id: 'day4', label: 'Day4', date: '2/02', week: '(ä¸€)', color: 'bg-red-50' },
            { id: 'day5', label: 'Day5', date: '2/03', week: '(äºŒ)', color: 'bg-red-50' },
            { id: 'day6', label: 'Day6', date: '2/04', week: '(ä¸‰)', color: 'bg-red-50' },
            { id: 'day7', label: 'Day7', date: '2/05', week: '(å››)', color: 'bg-red-50' },
            { id: 'day8', label: 'Day8', date: '2/06', week: '(äº”)', color: 'bg-red-50' },
        ];

        const passengersOutbound = [
            { name: "LI,I-KUN", seat: "2A", bag: "15KG" },
            { name: "CHEN,YING-YU", seat: "2C", bag: "15KG" },
            { name: "LI,ZHI-QI", seat: "2B", bag: "15KG" },
            { name: "HUNG,TSUNG-WEI", seat: "3F", bag: "20KG" },
            { name: "HUANG,CHING-TING", seat: "2E", bag: "20KG" },
            { name: "HUNG,SHAO-CHI", seat: "2F", bag: "20KG" },
            { name: "HUNG,SHAO-JIE", seat: "2D", bag: "20KG" }
        ];

        const passengersInbound = [
            { name: "LI,I-KUN", seat: "2F", bag: "25KG" },
            { name: "CHEN,YING-YU", seat: "2D", bag: "25KG" },
            { name: "LI,ZHI-QI", seat: "2E", bag: "20KG" },
            { name: "HUNG,TSUNG-WEI", seat: "4C", bag: "20KG" },
            { name: "HUANG,CHING-TING", seat: "4E", bag: "20KG" },
            { name: "HUNG,SHAO-CHI", seat: "4F", bag: "20KG" },
            { name: "HUNG,SHAO-JIE", seat: "4D", bag: "20KG" }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            renderMenu();
            updateCountdown();
            loadContent('day1'); 
            fetchRate();
            fetchWeather();
        });

        function renderMenu() {
            const menu = document.getElementById('tab-menu');
            const mainTabs = tabs.slice(0, 6);
            const dayTabs = tabs.slice(6, 14);

            const renderMainBtn = (tab) => `
                <button onclick="loadContent('${tab.id}')" 
                        id="btn-${tab.id}"
                        class="sticker-tab flex flex-col items-center justify-center p-1 rounded-t-xl text-slate-600 ${tab.color} border-t border-x border-black/5 h-11 w-full transition-all">
                    <i class="fas ${tab.icon} text-xs mb-0.5"></i>
                    <span class="font-bold text-[10px] font-hand whitespace-nowrap leading-none">${tab.label}</span>
                </button>
            `;

            const renderDayBtn = (tab) => `
                <button onclick="loadContent('${tab.id}')" 
                        id="btn-${tab.id}"
                        class="sticker-tab flex flex-col items-center justify-center p-0.5 rounded-b-lg text-slate-600 ${tab.color} border-b border-x border-black/5 h-12 w-full transition-all">
                    <span class="text-[9px] leading-none mb-0.5 whitespace-nowrap font-sans text-slate-500 font-bold scale-90">${tab.date}</span>
                    <span class="text-[8px] leading-none mb-0.5 whitespace-nowrap font-sans text-slate-400 font-bold scale-90">${tab.week}</span>
                    <span class="font-bold text-[10px] font-hand whitespace-nowrap leading-none text-jeju-orange">${tab.label}</span>
                </button>
            `;

            menu.innerHTML = `
                <div class="grid grid-cols-6 gap-1 w-full px-1">${mainTabs.map(renderMainBtn).join('')}</div>
                <div class="grid grid-cols-8 gap-0.5 w-full px-1 mt-1">${dayTabs.map(renderDayBtn).join('')}</div>
            `;
        }

        function updateCountdown() {
            const start = new Date(tripStartDate).getTime();
            const now = new Date().getTime();
            const distance = start - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const cdEl = document.getElementById('countdown');
            if (distance < 0) { cdEl.innerHTML = "æ—…ç¨‹ä¸­"; } else { cdEl.innerHTML = `${days + 1} Days Left`; }
        }

        function loadContent(tabId) {
            document.querySelectorAll('.sticker-tab').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('opacity-90');
            });
            const activeBtn = document.getElementById(`btn-${tabId}`);
            if(activeBtn) {
                activeBtn.classList.add('active'); 
                activeBtn.classList.remove('opacity-90');
            }
            const contentArea = document.getElementById('content-area');
            contentArea.innerHTML = getContent(tabId);
            if(tabId === 'rate') fetchRate();
            if(tabId === 'weather') fetchWeather();
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function renderScheduleList(events, titleText) {
            let html = `<div class="mb-6 text-center"><h2 class="washi-tape-title text-xl font-bold text-slate-700 font-hand tracking-wide">${titleText}</h2></div>`;
            html += '<div class="relative pl-2 space-y-2"><div class="absolute left-4 top-2 bottom-4 w-0.5 bg-slate-300 border-l-2 border-dashed border-slate-300 z-0"></div>';

            let currentTime = null;

            events.forEach((event, index) => {
                let displayTime = event.time;
                if (index === 0) {
                    currentTime = moment(event.time, "HH:mm");
                } else if (event.time === 'auto') {
                    const prevEvent = events[index - 1];
                    const addedMinutes = (prevEvent.duration || 0) + (prevEvent.travelTime || 0);
                    currentTime = currentTime.clone().add(addedMinutes, 'minutes');
                    displayTime = currentTime.format('HH:mm');
                } else {
                    currentTime = moment(event.time, "HH:mm");
                }

                const hasBtn = event.btnText && event.btnAction;
                const hasExtLink = event.externalLink;
                const customButtons = event.customButtons || [];
                const durationHtml = event.duration > 0 ? `<span class="text-[10px] text-slate-400 font-hand ml-2 bg-slate-50 px-1 rounded"><i class="fas fa-hourglass-half mr-1"></i>${event.duration}m</span>` : '';

                html += `
                    <div class="relative pl-8 mb-0 z-10">
                        <div class="absolute left-0 -translate-x-1/4 ${event.bg} border-4 border-paper w-8 h-8 rounded-full flex items-center justify-center z-10 shadow-sm text-slate-600"><i class="fas ${event.icon} text-xs"></i></div>
                        <div class="bg-white p-4 rounded-xl shadow-sm border border-slate-100 hover:shadow-md transition-shadow relative group">
                            <div class="flex justify-between items-center mb-1">
                                <div class="flex items-center">
                                    <div class="inline-block ${event.bg} text-slate-800 text-xs px-2 py-1 rounded font-bold font-hand tracking-wider shadow-sm">${displayTime}</div>
                                    ${durationHtml}
                                </div>
                            </div>
                            <h4 class="font-bold text-lg text-slate-800 leading-tight">${event.title}</h4>
                            <p class="text-slate-500 text-sm mt-1 font-hand">${event.desc}</p>
                            <div class="mt-3 flex flex-wrap gap-2">
                                ${hasBtn ? `<button onclick="${event.btnAction}()" class="text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 px-3 py-1.5 rounded-full transition-colors font-bold flex items-center gap-1 border border-slate-300 border-dashed"><i class="fas fa-lightbulb text-jeju-orange"></i> ${event.btnText}</button>` : ''}
                                ${hasExtLink ? `<a href="${event.externalLink}" target="_blank" class="text-xs bg-orange-50 hover:bg-orange-100 text-orange-600 px-3 py-1.5 rounded-full transition-colors font-bold flex items-center gap-1 border border-orange-200 border-dashed"><i class="fas fa-globe"></i> ä»‹ç´¹</a>` : ''}
                                ${customButtons.map(btn => `<a href="${btn.link}" target="_blank" class="text-xs bg-red-50 hover:bg-red-100 text-red-600 px-3 py-1.5 rounded-full transition-colors font-bold flex items-center gap-1 border border-red-200 border-dashed"><i class="fas ${btn.icon}"></i> ${btn.text}</a>`).join('')}
                            </div>
                            ${event.note ? `<div class="mt-2 text-[10px] text-slate-400 bg-slate-50 p-1 rounded inline-block"><i class="fas fa-info-circle mr-1"></i>${event.note}</div>` : ''}
                        </div>
                    </div>
                `;

                if (event.travelTime > 0 && event.travelMode) {
                    let travelEmoji = 'ğŸš¶'; 
                    if (event.travelMode === 'car') travelEmoji = 'ğŸš—';
                    if (event.travelMode === 'plane') travelEmoji = 'âœˆï¸';
                    let navButtonHtml = '';
                    if (event.navQuery && event.navQuery.length > 0) {
                        const navUrl = `https://map.naver.com/p/search/${encodeURIComponent(event.navQuery)}`;
                        navButtonHtml = `<a href="${navUrl}" target="_blank" class="ml-2 bg-green-50 text-green-600 border border-green-200 px-3 py-1 rounded-full text-[10px] font-bold shadow-sm flex items-center gap-1 transition-all active:scale-95"><i class="fas fa-location-arrow"></i> å°èˆª</a>`;
                    }
                    html += `<div class="relative pl-8 py-3 z-0"><div class="flex items-center text-slate-500 text-xs ml-2"><div class="w-7 h-7 rounded-full bg-white flex items-center justify-center mr-2 border border-slate-200 shadow-sm text-sm select-none">${travelEmoji}</div><span class="font-hand font-bold mr-1 text-slate-400">${event.travelTime} min</span>${navButtonHtml}</div></div>`;
                } else if (index < events.length - 1) {
                    html += `<div class="h-4"></div>`;
                }
            });
            html += '</div>';
            return html;
        }

        window.closeModal = function() { document.getElementById('info-modal').classList.add('hidden'); }
        window.showLoungeGuide = function() {
            document.getElementById('modal-content-area').innerHTML = `<div class="text-left relative"><div class="absolute -top-2 -right-2 text-4xl opacity-20 rotate-12">â˜•</div><h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-dashed border-slate-200 pb-3 font-hand tracking-wide">å—è‹‘è²´è³“å®¤æŒ‡å¼•</h3><div class="bg-blue-50 p-4 rounded-xl mb-4 text-sm text-slate-700 shadow-inner border border-blue-100"><strong>åœ°é»ï¼š</strong> é«˜é›„å°æ¸¯æ©Ÿå ´ åœ‹éš›èˆªå»ˆ 3F</div><div class="space-y-3 font-hand text-lg text-slate-600"><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">1</span><span>é€šéè­‰ç…§æŸ¥é©—æ«ƒæª¯é€²å…¥å…ç¨…åº—å€</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">2</span><span>ç›´æ¥<strong class="text-jeju-blue mx-1">ã€Œå‘å·¦è½‰ã€</strong>(å¾€ 21-26 ç™»æ©Ÿé–€æ–¹å‘)</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">3</span><span>æ²¿è‘—é•·å»Šç›´èµ°åˆ°åº•</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">4</span><span>ä½æ–¼ <strong class="text-jeju-orange mx-1">22 è™Ÿç™»æ©Ÿé–€</strong> é™„è¿‘</span></div></div><div class="mt-4 bg-orange-50 p-3 rounded-lg text-sm text-slate-700 border border-orange-100"><strong>è¾¨è­˜ç‰¹å¾µï¼š</strong><br>å¤–è§€ç‚ºå¾©å¤ç´…ç£šç‰†èˆ‡åœ“å½¢æ‹±é–€è¨­è¨ˆï¼Œå‘ˆç¾ã€Œè˜‡å·åº­åœ’ã€é¢¨æ ¼ã€‚</div></div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }
        window.showCarGuide = function() {
            document.getElementById('modal-content-area').innerHTML = `<div class="text-left relative"><h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-dashed border-slate-200 pb-3 font-hand tracking-wide">The Safe Rent A Car å–è»ŠæŒ‡å¼•</h3><div class="bg-yellow-50 p-4 rounded-xl mb-4 text-sm text-slate-700 shadow-inner border border-yellow-100"><strong>æ¥é§åœ°é»ï¼š</strong><br>æ¿Ÿå·åœ‹éš›æ©Ÿå ´ GATE 5 å‡ºå£å¤–ï¼Œéæ–‘é¦¬ç·šè‡³ç§Ÿè»Šæ¥é§å€ <span class="text-red-500 font-bold text-lg">5-14</span></div><div class="space-y-3 font-hand text-lg text-slate-600"><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">1</span><span>æŠµé”æ¿Ÿå·æ©Ÿå ´å¾Œï¼Œè«‹å¾€ <strong>GATE 5</strong> å‡ºå£ç§»å‹•</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">2</span><span>éæ–‘é¦¬ç·šåˆ°é”å°é¢çš„ç§Ÿè»Šæ¥é§è»Šåœè»Šå ´</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">3</span><span>å°‹æ‰¾ <strong class="text-jeju-orange">5å€åŸŸ 14è™Ÿ (5-14)</strong> ç«™ç‰Œ</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">4</span><span>æ­ä¹˜å¯«æœ‰ <strong>"The Safe Rent A Car"</strong> çš„æ¥é§è»Š</span></div></div><div class="mt-4 bg-slate-100 p-3 rounded-lg text-sm text-slate-600 border border-slate-200"><strong>æ¥é§è»Šç‰¹å¾µï¼š</strong><br>é€šå¸¸æ˜¯ç™½è‰²æˆ–é»ƒè‰²çš„å°å·´å£«ï¼Œè»Šèº«å°æœ‰ The Safe Rent A Car LOGOã€‚</div></div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        // Add Price Modal Functions
        window.showEcoLandPrice = function() {
            document.getElementById('modal-content-area').innerHTML = `<div class="text-left"><h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-green-200 pb-2">ECOLAND ç¥¨åƒ¹è³‡è¨Š</h3><div class="space-y-3 font-hand text-lg"><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>æˆäºº (19æ­²ä»¥ä¸Š)</span><span class="font-bold">â‚©16,000</span></div><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>é’å°‘å¹´ (13-18æ­²)</span><span class="font-bold">â‚©13,000</span></div><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>å…’ç«¥ (3-12æ­²)</span><span class="font-bold">â‚©11,000</span></div></div><div class="mt-4 bg-green-50 p-3 rounded-lg text-xs text-green-700">ğŸ’¡ å»ºè­°é ç•™ 2-3 å°æ™‚éŠç©æ™‚é–“ï¼Œå°ç«è»Šæ¯ 7-12 åˆ†é˜ä¸€ç­ã€‚</div></div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }
        window.showRailBikePrice = function() {
            document.getElementById('modal-content-area').innerHTML = `<div class="text-left"><h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-pink-200 pb-2">æ¿Ÿå·éµé“è‡ªè¡Œè»Š ç¥¨åƒ¹</h3><div class="space-y-3 font-hand text-lg"><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>2äººåº§</span><span class="font-bold">â‚©30,000</span></div><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>3äººåº§</span><span class="font-bold">â‚©40,000</span></div><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>4äººåº§</span><span class="font-bold">â‚©48,000</span></div></div><div class="mt-4 bg-pink-50 p-3 rounded-lg text-xs text-pink-700">ğŸ’¡ è«‹æå‰ 20 åˆ†é˜æŠµé”å”®ç¥¨è™•æ›ç¥¨ã€‚è»Šè¼›ç‚ºè‡ªå‹•é§•é§›ï¼Œä¸ç”¨è²»åŠ›è¸©ï¼</div></div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        async function fetchRate() {
            const el = document.getElementById('rate-display');
            try {
                const res = await fetch('https://api.exchangerate-api.com/v4/latest/TWD');
                const data = await res.json();
                currentExchangeRate = data.rates.KRW;
                if(document.getElementById('krw-val')) document.getElementById('krw-val').innerText = currentExchangeRate.toFixed(2);
                if(document.getElementById('calc-twd') && document.getElementById('calc-twd').value === "") convertCurrency('twd');
            } catch (e) { console.error(e); }
        }
        function convertCurrency(source) {
            if(!currentExchangeRate) return;
            const twd = document.getElementById('calc-twd'), krw = document.getElementById('calc-krw');
            if(source==='twd') krw.value=(parseFloat(twd.value)*currentExchangeRate).toFixed(0)||'';
            else twd.value=(parseFloat(krw.value)/currentExchangeRate).toFixed(0)||'';
        }

        async function fetchWeather() {
            if(!document.getElementById('weather-widget')) return;
            if(weatherDataCache) { renderWeatherWidget(weatherDataCache); return; }
            try {
                const url = "https://api.open-meteo.com/v1/forecast?latitude=33.4996&longitude=126.5312&current_weather=true&daily=weathercode,temperature_2m_max,temperature_2m_min,precipitation_probability_max,sunrise,sunset,uv_index_max&timezone=Asia%2FSeoul&forecast_days=8";
                const res = await fetch(url);
                const data = await res.json();
                weatherDataCache = data;
                renderWeatherWidget(data);
            } catch (e) { console.error(e); }
        }
        function renderWeatherWidget(data) {
            if(!document.getElementById('weather-widget')) return;
            const current = data.current_weather;
            document.getElementById('curr-temp').innerText = `${current.temperature}Â°`;
            document.getElementById('weather-loading').style.display='none';
            document.getElementById('weather-content').classList.remove('hidden');
            let html = '';
            for(let i=0;i<7;i++) {
                const d = data.daily;
                const date = moment(d.time[i]).format('MM/DD');
                html += `<div onclick="showWeatherDetail(${i})" class="flex-shrink-0 w-20 flex flex-col items-center p-2 bg-white border-2 border-dashed border-slate-200 rounded-xl snap-center mx-1 active:scale-95 transition-transform cursor-pointer hover:border-jeju-blue"><span class="text-sm font-hand font-bold text-slate-600">${date}</span><span class="text-[10px] font-bold text-slate-500">${d.temperature_2m_min[i]}Â°~${d.temperature_2m_max[i]}Â°</span></div>`;
            }
            document.getElementById('forecast-container').innerHTML = html;
        }
        window.showWeatherDetail = function(i) {
            if(!weatherDataCache) return;
            const d = weatherDataCache.daily;
            document.getElementById('modal-content-area').innerHTML = `<div class="mb-4"><div class="text-2xl font-bold">${moment(d.time[i]).format('MM/DD')}</div><div class="text-4xl">${d.temperature_2m_min[i]}Â° - ${d.temperature_2m_max[i]}Â°</div></div><div class="grid grid-cols-2 gap-3 text-left bg-slate-50 p-4 rounded-xl text-sm"><div>é™é›¨: ${d.precipitation_probability_max[i]}%</div><div>ç´«å¤–ç·š: ${d.uv_index_max[i]}</div></div><div class="mt-4 text-xs text-slate-400">é»æ“ŠèƒŒæ™¯é—œé–‰</div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        window.toggleDetails = function(id) {
            const el = document.getElementById(id);
            const icon = document.getElementById(id + '-icon');
            if(el.classList.contains('show')) { el.classList.remove('show'); if(icon) icon.classList.remove('rotate-180'); }
            else { el.classList.add('show'); if(icon) icon.classList.add('rotate-180'); }
        }
        window.updateImage = function(wrapperId, input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    const imgEl = document.querySelector(`#${wrapperId} img`);
                    if(imgEl) imgEl.src = e.target.result;
                    try { localStorage.setItem('img-' + wrapperId, e.target.result); } catch(e) {}
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function renderPassengerTable(list) {
            return `<div class="overflow-x-auto"><table class="w-full text-sm text-left mt-2 border-collapse"><thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b"><tr><th class="px-2 py-2 w-1/2">Name</th><th class="px-1 py-2 text-center w-1/4">Seat</th><th class="px-1 py-2 text-right w-1/4">KG</th></tr></thead><tbody>${list.map(p=>`<tr class="bg-white border-b hover:bg-yellow-50"><td class="px-2 py-2 font-medium text-slate-900 text-xs break-all">${p.name}</td><td class="px-1 py-2 text-center font-hand font-bold text-lg text-jeju-blue">${p.seat}</td><td class="px-1 py-2 text-right font-hand font-bold text-slate-600">${p.bag}</td></tr>`).join('')}<tr class="bg-slate-50 font-bold text-xs"><td class="px-2 py-2 text-right" colspan="2">Total:</td><td class="px-1 py-2 text-right">${list.reduce((acc, curr) => acc + parseInt(curr.bag), 0)} KG</td></tr></tbody></table></div>`;
        }

        function getContent(id) {
            const header = (text) => `<div class="mb-6 text-center"><h2 class="washi-tape-title text-xl font-bold text-slate-700 font-hand tracking-wide">${text}</h2></div>`;
            const bookingItem = (title, sub, imgId, iconClass, colorClass, defaultFilenames) => {
                const filenames = Array.isArray(defaultFilenames) ? defaultFilenames : [defaultFilenames];
                const fallbackImg = "https://images.unsplash.com/photo-1548115184-bc6544d06a58?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80";
                const imagesHtml = filenames.map((filename, index) => {
                    const imgSrc = localStorage.getItem(`img-${imgId}-${index}`) || filename; 
                    return `<div class="flex-1 min-w-[200px] p-2 flex flex-col items-center relative" id="${imgId}-${index}"><div class="inline-block p-1 bg-white shadow-md transform ${index % 2 === 0 ? 'rotate-0' : '-rotate-0'} relative group w-full border border-gray-100"><img src="${imgSrc}" onerror="this.src='${fallbackImg}'" class="rounded w-full h-auto" alt="Booking Image"></div><input type="file" id="file-${imgId}-${index}" style="display: none;" accept="image/*" onchange="updateImage('${imgId}-${index}', this)"><div class="mt-2"><button onclick="event.stopPropagation(); document.getElementById('file-${imgId}-${index}').click();" class="text-[10px] bg-slate-200 hover:bg-slate-300 text-slate-600 px-3 py-1 rounded-full transition-colors font-bold whitespace-nowrap"><i class="fas fa-camera mr-1"></i> æ›´æ›</button></div><div class="text-[9px] text-slate-400 mt-2 break-all text-center leading-tight"><i class="fas fa-file-image mr-1"></i>${filename}</div></div>`;
                }).join('');
                return `<div class="bg-white rounded-xl shadow-sm border-2 border-slate-100 overflow-hidden cursor-pointer hover:border-${colorClass}-400 transition-all mb-4 relative" onclick="toggleDetails('${imgId}')"><div class="p-3 flex items-center justify-between"><div class="flex items-center gap-3"><div class="bg-${colorClass}-100 text-${colorClass}-500 w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center text-lg border-2 border-white shadow-sm"><i class="${iconClass}"></i></div><div><h3 class="font-bold text-lg font-hand text-slate-700 tracking-wide leading-tight">${title}</h3><p class="text-xs text-slate-400 font-sans border-b border-dotted border-${colorClass}-200 inline-block">${sub}</p></div></div><i id="${imgId}-icon" class="fas fa-chevron-down text-slate-400 transition-transform duration-300"></i></div><div id="${imgId}" class="details-expand bg-paper border-t-2 border-dashed border-slate-200"><div class="p-3"><div class="flex flex-wrap justify-center -mx-2">${imagesHtml}</div></div></div></div>`;
            };
            const linkItem = (title, sub, iconClass, colorClass, links) => `<div class="bg-white rounded-xl shadow-sm border-2 border-slate-100 overflow-hidden mb-4 relative"><div class="p-3 flex items-center justify-between"><div class="flex items-center gap-3"><div class="bg-${colorClass}-100 text-${colorClass}-500 w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center text-lg border-2 border-white shadow-sm"><i class="${iconClass}"></i></div><div><h3 class="font-bold text-lg font-hand text-slate-700 tracking-wide leading-tight">${title}</h3><p class="text-xs text-slate-400 font-sans border-b border-dotted border-${colorClass}-200 inline-block">${sub}</p></div></div></div><div class="bg-paper border-t-2 border-dashed border-slate-200 p-3"><div class="flex flex-col gap-2">${links.map(link => `<a href="${link.url}" target="_blank" class="flex items-center p-3 bg-white rounded-lg border border-slate-200 shadow-sm hover:shadow-md hover:border-${colorClass}-300 transition-all group"><div class="bg-${colorClass}-50 text-${colorClass}-500 w-8 h-8 rounded-full flex items-center justify-center mr-3 group-hover:bg-${colorClass}-100"><i class="fas fa-link"></i></div><span class="font-bold text-slate-700 group-hover:text-${colorClass}-600">${link.text}</span><i class="fas fa-external-link-alt ml-auto text-slate-300 group-hover:text-${colorClass}-400 text-xs"></i></a>`).join('')}</div></div></div>`;
            const prepGroup = (title, items, color) => `<div class="mb-4 bg-white p-4 rounded-lg shadow-sm relative overflow-hidden"><div class="absolute inset-0 pointer-events-none opacity-30" style="background-image: linear-gradient(#e5e7eb 1px, transparent 1px); background-size: 100% 24px;"></div><div class="relative inline-block bg-${color}-100 px-3 py-1 rounded mb-3 transform -rotate-1 shadow-sm border border-${color}-200"><span class="font-bold text-${color}-600 font-hand text-lg tracking-wider">${title}</span></div><div class="relative space-y-2 pl-1">${items.map(item => `<label class="flex items-center cursor-pointer hover:bg-${color}-50 p-1 rounded transition-colors"><input type="checkbox" class="custom-checkbox text-${color}-500 mr-2 flex-shrink-0"><span class="text-slate-600 font-hand text-base pt-1 leading-none">${item}</span></label>`).join('')}</div></div>`;
            const dayPlanner = (dayNum, dateStr) => `${header(`Day ${dayNum} : ${dateStr}`)}<div class="bg-yellow-100 p-3 rounded-lg shadow-sm transform -rotate-1 mb-6 border border-yellow-200 relative"><div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-20 h-4 bg-red-100 opacity-60 rounded-sm"></div><h3 class="font-bold text-base text-orange-800 text-center font-hand"><i class="fas fa-star mr-1"></i> Highlights</h3><p class="text-slate-700 text-center mt-1 font-hand text-lg">Coming Soon...</p></div>`;

            switch(id) {
                case 'flight':
                    return `${header('Flight Info èˆªç­è³‡è¨Š')}<div class="flex flex-col gap-4"><div class="bg-white rounded-xl shadow-md border-2 border-slate-100 overflow-hidden cursor-pointer" onclick="toggleDetails('outbound-details')"><div class="p-4 relative"><div class="absolute right-0 top-0 bg-jeju-orange text-white px-3 py-1 rounded-bl-lg font-bold text-xs z-10">å»ç¨‹ Outbound</div><div class="flex justify-between items-center text-center mt-2"><div class="text-2xl font-hand font-bold text-slate-800">16:00 <span class="text-xs text-slate-400 block font-sans">KHH</span></div><div class="flex-1 px-2"><div class="border-b-2 border-dashed border-slate-300 relative h-1 w-full my-2"></div><div class="flex justify-between text-[10px] text-slate-500 font-bold uppercase"><span>Tigerair</span><span class="text-jeju-orange">IT 670</span></div></div><div class="text-2xl font-hand font-bold text-slate-800">19:25 <span class="text-xs text-slate-400 block font-sans">CJU</span></div></div></div><div id="outbound-details" class="details-expand bg-orange-50 px-4"><div class="pb-4 pt-2">${renderPassengerTable(passengersOutbound)}</div></div></div><div class="bg-white rounded-xl shadow-md border-2 border-slate-100 overflow-hidden cursor-pointer" onclick="toggleDetails('inbound-details')"><div class="p-4 relative"><div class="absolute right-0 top-0 bg-jeju-blue text-white px-3 py-1 rounded-bl-lg font-bold text-xs z-10">å›ç¨‹ Inbound</div><div class="flex justify-between items-center text-center mt-2"><div class="text-2xl font-hand font-bold text-slate-800">20:15 <span class="text-xs text-slate-400 block font-sans">CJU</span></div><div class="flex-1 px-2"><div class="border-b-2 border-dashed border-slate-300 relative h-1 w-full my-2"></div><div class="flex justify-between text-[10px] text-slate-500 font-bold uppercase"><span>Tigerair</span><span class="text-jeju-blue">IT 671</span></div></div><div class="text-2xl font-hand font-bold text-slate-800">21:50 <span class="text-xs text-slate-400 block font-sans">KHH</span></div></div></div><div id="inbound-details" class="details-expand bg-blue-50 px-4"><div class="pb-4 pt-2">${renderPassengerTable(passengersInbound)}</div></div></div></div>`;
                case 'rate': return `${header('Calculator åŒ¯ç‡è¨ˆç®—æ©Ÿ')}<div id="rate-display"><div class="bg-gradient-to-r from-slate-800 to-slate-700 rounded-2xl p-4 text-white shadow-lg mb-6"><div class="text-center"><div class="text-xs">Current Rate</div><div class="text-3xl font-bold">1 TWD â‰ˆ <span id="krw-val">--</span></div></div></div><div class="bg-white p-4 rounded-xl border-2 border-slate-200"><div class="flex flex-col gap-3"><input type="number" id="calc-twd" placeholder="TWD" oninput="convertCurrency('twd')" class="w-full p-2 border rounded"><input type="number" id="calc-krw" placeholder="KRW" oninput="convertCurrency('krw')" class="w-full p-2 border rounded"></div></div></div>`;
                case 'weather': return `${header('7 Days Weather ä¸€é€±æ°£è±¡')}<div id="weather-widget"><div id="weather-loading" class="text-center py-10">Checking...</div><div id="weather-content" class="hidden"><div class="bg-blue-500 rounded-2xl p-4 text-white shadow-md mb-6"><div class="text-5xl font-black" id="curr-temp">--Â°</div></div><div class="flex overflow-x-auto gap-3 pb-4 snap-x hide-scrollbar" id="forecast-container"></div></div></div>`;
                case 'intro': return `${header('Jeju Best Spots å¿…å»æ™¯é»')}<div class="text-center py-20"><div class="inline-block bg-white p-8 rounded-2xl shadow-sm border-2 border-dashed border-slate-200 transform rotate-1"><h3 class="font-hand text-2xl text-slate-500">Waiting for Itinerary...</h3></div></div>`;
                case 'prep': return `${header('Checklist è¡Œå‰æº–å‚™')}<div class="grid grid-cols-1 gap-4">${prepGroup('å¿…å‚™è­‰ä»¶', ['è­·ç…§', 'K-ETA', 'æ©Ÿç¥¨', 'è¨‚æˆ¿', 'é§•ç…§'], 'blue')}${prepGroup('é‡‘æµèˆ‡ç¶²è·¯', ['WOWPASS', 'ç¾é‡‘', 'ä¿¡ç”¨å¡', 'ç¶²å¡'], 'yellow')}</div>`;
                case 'booking': return `${header('Booking & Tickets æ†‘è­‰')}<div class="space-y-4">
                    ${bookingItem('The Safe Rent A Car', 'ç§Ÿè»Šè³‡è¨Š', 'img-car', 'fas fa-car', 'green', ['The_Safe_Rent_A_Car_1.png', 'The_Safe_Rent_A_Car_2.png', 'The_Safe_Rent_A_Car_3.png', 'The_Safe_Rent_A_Car_4.png', 'The_Safe_Rent_A_Car_5.png', 'The_Safe_Rent_A_Car_6.png', 'The_Safe_Rent_A_Car_7.png'])}
                    ${bookingItem('ã€Day1ã€‘æ¿Ÿå·Glad Maisoné£¯åº—', 'æ¿Ÿå·å¸‚å€', 'img-h1', 'fas fa-hotel', 'purple', 'Maison_Glad_Voucher.png')}
                    ${bookingItem('ã€Day2.3ã€‘åŸå±±è²æ–¯ç‰¹é£¯åº—', 'åŸå±±', 'img-h2', 'fas fa-hotel', 'purple', ['Coop_City_Seongsan_1.png', 'Coop_City_Seongsan_2.png'])}
                    ${bookingItem('ã€Day4.5ã€‘ç¥è©±ä¸–ç•Œ-è—é¼', 'ç¥è©±ä¸–ç•Œ', 'img-h3', 'fas fa-hotel', 'purple', ['Shinhwa_Landing_1.png', 'Shinhwa_Landing_2.png'])}
                    ${bookingItem('ã€Day6.7ã€‘åˆ©å¥§é£¯åº—', 'æ–°æ¿Ÿå·', 'img-h4', 'fas fa-hotel', 'purple', ['Hotel_Leo_1.png', 'Hotel_Leo_2.png'])}
                    ${linkItem('Catch Table', 'é¤å»³è¨‚ä½é€£çµ', 'fas fa-utensils', 'orange', [{ text: 'ã€London Bagel Museumã€‘', url: 'https://www.catchtable.net/zh-TW/shop/london_bagel_museum_jeju' }, { text: 'ã€ç†Ÿæˆåˆ°ç‡’è‚‰ã€‘', url: 'https://www.catchtable.net/zh-TW/shop/suksungdo_jeju' }])}
                    ${bookingItem('Aqua Planet', 'æµ·æ´‹é¤¨é–€ç¥¨', 'img-aqua', 'fas fa-fish', 'blue', ['Aqua_Planet_Ticket_1.png', 'Aqua_Planet_Ticket_2.png'])}
                </div>`;
                
                case 'day1': return renderScheduleList(day1Events, 'Day 1 : 1/30(äº”)');
                case 'day2': return renderScheduleList(day2Events, 'Day 2 : 1/31(å…­)');
                case 'day3': return dayPlanner('3', '2/01(æ—¥)');
                case 'day4': return dayPlanner('4', '2/02(ä¸€)');
                case 'day5': return dayPlanner('5', '2/03(äºŒ)');
                case 'day6': return dayPlanner('6', '2/04(ä¸‰)');
                case 'day7': return dayPlanner('7', '2/05(å››)');
                case 'day8': return dayPlanner('8', '2/06(äº”)');
                default: return '<div>Coming Soon</div>';
            }
        }
    </script>
</body>
</html>