<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ÊøüÂ∑ûÂ≥∂8Â§©7Â§úË¶™Â≠êÈÅä</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <!-- ÂºïÂÖ• Noto Sans TC, Gaegu, JetBrains Mono -->
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@400;700&family=Noto+Sans+TC:wght@400;500;700&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/locale/zh-tw.min.js"></script>
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'hand': ['Gaegu', 'cursive'],
                        'sans': ['Noto Sans TC', 'sans-serif'],
                        'mono': ['JetBrains Mono', 'monospace'],
                        'kaiti': ['KaiTi', 'BiauKai', 'DFKai-SB', 'serif'],
                    },
                    colors: {
                        'jeju-orange': '#FF8C42',
                        'jeju-yellow': '#FFD93D',
                        'jeju-green': '#6BCB77',
                        'jeju-blue': '#4D96FF',
                        'paper': '#FFFDF7',
                    }
                }
            }
        }
    </script>

    <style>
        body {
            background-image: url('https://images.unsplash.com/photo-1548115184-bc6544d06a58?ixlib=rb-4.0.3&auto=format&fit=crop&w=2070&q=80');
            background-size: cover;
            background-position: center;
            background-attachment: fixed;
            font-family: 'Noto Sans TC', sans-serif;
            overflow-y: scroll;
        }

        .journal-shadow {
            box-shadow: 
                0 1px 1px rgba(0,0,0,0.15), 
                0 10px 0 -5px #eee, 
                0 10px 1px -4px rgba(0,0,0,0.15), 
                0 20px 0 -10px #eee, 
                0 20px 1px -9px rgba(0,0,0,0.15);
        }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .sticker-tab {
            transition: transform 0.2s, background-color 0.2s;
            clip-path: polygon(0 0, 100% 0, 100% 90%, 95% 100%, 5% 100%, 0 90%);
        }
        .sticker-tab:active { transform: translateY(0); }
        
        .sticker-tab.active {
            background-color: #FFD93D !important;
            color: #374151 !important;
            transform: translateY(-3px);
            font-weight: bold;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            z-index: 10;
            border-bottom: none;
        }

        .washi-tape-title {
            position: relative;
            background-color: rgba(255, 225, 150, 0.6);
            padding: 0.2em 1em;
            transform: rotate(-1deg);
            display: inline-block;
            box-shadow: 2px 2px 4px rgba(0,0,0,0.1);
        }
        .washi-tape-title::before, .washi-tape-title::after {
            content: '';
            position: absolute;
            width: 20px;
            height: 100%;
            top: 0;
            background-color: rgba(255,255,255,0.4);
            mask-image: url("data:image/svg+xml,%3Csvg width='20' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0 L20 0 L18 5 L20 10 L18 15 L20 20 L18 25 L20 30 L18 35 L20 40 L0 40 Z' fill='black'/%3E%3C/svg%3E");
            -webkit-mask-image: url("data:image/svg+xml,%3Csvg width='20' height='40' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M0 0 L20 0 L18 5 L20 10 L18 15 L20 20 L18 25 L20 30 L18 35 L20 40 L0 40 Z' fill='black'/%3E%3C/svg%3E");
        }
        .washi-tape-title::before { left: -10px; transform: scaleX(-1); }
        .washi-tape-title::after { right: -10px; }

        .hand-font { font-family: 'Gaegu', cursive; }
        
        .live-title { animation: float-title 3s ease-in-out infinite; }
        @keyframes float-title {
            0%, 100% { transform: translateY(0) rotate(-1deg); }
            50% { transform: translateY(-3px) rotate(1deg); }
        }

        .details-expand {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }
        .details-expand.show {
            max-height: 2000px;
            transition: max-height 0.5s ease-in;
        }

        .custom-checkbox {
            appearance: none;
            background-color: #fff;
            margin: 0;
            font: inherit;
            color: currentColor;
            width: 1.4em;
            height: 1.4em;
            border: 2px solid #555;
            border-radius: 0.3em;
            display: grid;
            place-content: center;
            cursor: pointer;
            transform: translateY(-0.075em);
        }
        .custom-checkbox::before {
            content: "";
            width: 0.8em;
            height: 0.8em;
            transform: scale(0);
            transition: 120ms transform ease-in-out;
            box-shadow: inset 1em 1em #FF8C42;
            transform-origin: center;
            clip-path: polygon(14% 44%, 0 65%, 50% 100%, 100% 16%, 80% 0%, 43% 62%);
        }
        .custom-checkbox:checked::before { transform: scale(1); }
        .custom-checkbox:checked + span {
            text-decoration: line-through;
            color: #aaa;
            font-style: italic;
        }

        .polaroid-card {
            background: white;
            padding: 10px 10px 40px 10px;
            box-shadow: 2px 3px 8px rgba(0,0,0,0.15);
            transition: transform 0.3s;
            position: relative;
        }
        
        .polaroid-img { filter: sepia(10%) contrast(105%) saturate(110%); }

        .masking-tape {
            position: absolute;
            height: 30px;
            width: 80px;
            top: -10px;
            left: 50%;
            transform: translateX(-50%) rotate(-2deg);
            background-color: rgba(255, 255, 255, 0.4);
            border-left: 2px dashed rgba(0,0,0,0.05);
            border-right: 2px dashed rgba(0,0,0,0.05);
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            opacity: 0.8;
            z-index: 25;
        }
        .masking-tape.tape-yellow { background-color: rgba(255, 217, 61, 0.7); }
        .masking-tape.tape-blue { background-color: rgba(77, 150, 255, 0.7); }
        .masking-tape.tape-green { background-color: rgba(107, 203, 119, 0.7); }
        .masking-tape.tape-pink { background-color: rgba(255, 154, 158, 0.7); }

        .modal-overlay {
            background-color: rgba(0,0,0,0.6);
            backdrop-filter: blur(4px);
        }
        .modal-content {
            animation: modalPop 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }
        @keyframes modalPop {
            0% { transform: scale(0.8); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .boat-table { width: 100%; border-collapse: collapse; margin-bottom: 10px; font-size: 0.85rem; }
        .boat-table th { background: #f1f5f9; padding: 8px; text-align: center; border: 1px solid #e2e8f0; font-weight: bold; color: #475569; }
        .boat-table td { padding: 8px; text-align: center; border: 1px solid #e2e8f0; color: #334155; }
        .boat-table tr:nth-child(even) { background: #f8fafc; }
        
        .doodle-sticker {
            position: absolute;
            font-size: 2rem;
            filter: drop-shadow(2px 2px 0px rgba(0,0,0,0.1));
            z-index: 30;
            pointer-events: none;
        }
        
        .bg-stripes-gray {
            background-image: repeating-linear-gradient(45deg, #eee, #eee 10px, #fff 10px, #fff 20px);
        }
        
        input::placeholder { color: #cbd5e1; font-family: 'Noto Sans TC'; font-weight: normal; }
    </style>
</head>
<body class="min-h-screen pb-10 overflow-x-hidden text-slate-800">

    <!-- Modal -->
    <div id="info-modal" class="fixed inset-0 z-50 hidden flex items-center justify-center p-4 modal-overlay" onclick="closeModal()">
        <div class="bg-white rounded-2xl p-6 max-w-sm w-full shadow-2xl modal-content border-4 border-jeju-yellow relative max-h-[85vh] overflow-y-auto hide-scrollbar" onclick="event.stopPropagation()">
            <button onclick="closeModal()" class="absolute top-2 right-2 text-slate-400 hover:text-slate-600 w-8 h-8 rounded-full bg-slate-100 flex items-center justify-center z-10">
                <i class="fas fa-times"></i>
            </button>
            <div id="modal-content-area" class="text-center"></div>
        </div>
    </div>

    <!-- È†ÇÈÉ®Ê®ôÈ°åËàáÂÄíÊï∏ -->
    <div class="max-w-md mx-auto pt-6 pb-2 text-center px-4 relative z-10">
        <div class="inline-block bg-white/90 backdrop-blur px-6 py-3 rounded-2xl shadow-lg border-4 border-jeju-orange live-title w-full">
            <h1 class="text-2xl font-black text-slate-800 tracking-wider font-kaiti">
                <span class="text-jeju-orange">ÊøüÂ∑ûÂ≥∂</span> 8Â§©7Â§úË¶™Â≠êÈÅä <i class="fas fa-plane-departure text-jeju-blue"></i>
            </h1>
            <div class="mt-2 flex flex-col items-center justify-center gap-2 text-slate-600 font-medium">
                <span class="bg-jeju-yellow px-3 py-1 rounded-full text-slate-800 border-2 border-slate-800 border-dashed font-hand text-lg font-bold">
                    <i class="fas fa-calendar-alt mr-1"></i> 2026.01.30 - 02.06
                </span>
                <span id="countdown" class="bg-jeju-blue text-white px-4 py-1 rounded-full font-hand text-lg tracking-widest shadow-sm">
                    D-Day Ë®àÁÆó‰∏≠...
                </span>
            </div>
        </div>
    </div>

    <!-- ‰∏ªÂÆπÂô® -->
    <div class="max-w-md mx-auto px-2">
        <div class="flex flex-col gap-1 px-1 pb-1" id="tab-menu" style="margin-bottom: -10px; padding-top: 5px;">
            <!-- ÈÅ∏ÂñÆÁî± JS ÁîüÊàê -->
        </div>

        <main class="bg-paper rounded-2xl p-4 min-h-[70vh] relative journal-shadow border-t-8 border-jeju-yellow mb-10">
            <div class="absolute top-3 left-3 text-red-400 text-xl drop-shadow-md z-20"><i class="fas fa-thumbtack"></i></div>
            <div class="absolute top-3 right-3 text-jeju-blue text-xl drop-shadow-md z-20"><i class="fas fa-paperclip"></i></div>
            <div id="content-area" class="relative z-10"></div>
        </main>
    </div>

    <script>
        const tripStartDate = "2026-01-30";
        let currentExchangeRate = 0; 
        let weatherDataCache = null; 
        let expenseData = JSON.parse(localStorage.getItem('jeju_expenses')) || [];

        // ÂÆöÁæ© renderBookingInfo ÂáΩÂºè (ÁßªËá≥ÊúÄ‰∏äÊñπÈÅøÂÖç ReferenceError)
        function renderBookingInfo() {
            const checkInUrl = "https://sci.tigerairtw.com/zh-TW/login?_gl=1*cre16d*_gcl_aw*R0NMLjE3Njk1MjIxNjAuQ2owS0NRaUE0ZUhMQmhDekFSSXNBSjJOWm9McGFNeldlTlltTW5BeXNYeHk0azYxTzR2WDNOUDhoWFNfQXh1dzVibGxMcDhBVDZ1RW5Kd2FBdllSRUFMd193Y0I.*_gcl_au*MTExOTM1MTM0NS4xNzY5NDg2MzEx*_ga*MjcwNTYyNjguMTc2OTQ4NjMxMQ..*_ga_SNXJDVLRNM*czE3Njk1MjIxNTkkbzMkZzAkdDE3Njk1MjIxNTkkajYwJGwwJGgw";
            return `
                <div class="mb-4 space-y-2">
                    <div class="bg-white p-2 rounded-lg border-2 border-dashed border-slate-200 flex justify-between items-center relative overflow-hidden">
                         <div class="absolute right-0 top-0 text-6xl opacity-5 rotate-12 select-none"><i class="fas fa-ticket-alt"></i></div>
                         <div class="z-10">
                            <div class="text-[10px] text-slate-400 font-bold mb-0.5"><i class="fas fa-user-tag mr-1"></i>LI,I-KUN</div>
                            <div class="text-xl font-black text-jeju-orange font-hand tracking-widest leading-none">Z4WW7F</div>
                         </div>
                         <a href="${checkInUrl}" target="_blank" class="z-10 bg-jeju-orange text-white text-xs px-3 py-2 rounded-lg font-bold shadow-sm hover:bg-orange-500 transition-transform active:scale-95 flex items-center">
                            <i class="fas fa-passport mr-1"></i> Ëá™Âä©Â†±Âà∞
                         </a>
                    </div>
                    <div class="bg-white p-2 rounded-lg border-2 border-dashed border-slate-200 flex justify-between items-center relative overflow-hidden">
                         <div class="absolute right-0 top-0 text-6xl opacity-5 rotate-12 select-none"><i class="fas fa-ticket-alt"></i></div>
                         <div class="z-10">
                            <div class="text-[10px] text-slate-400 font-bold mb-0.5"><i class="fas fa-user-tag mr-1"></i>HUNG,TSUNG-WEI</div>
                            <div class="text-xl font-black text-jeju-blue font-hand tracking-widest leading-none">M5NCRC</div>
                         </div>
                         <a href="${checkInUrl}" target="_blank" class="z-10 bg-jeju-blue text-white text-xs px-3 py-2 rounded-lg font-bold shadow-sm hover:bg-blue-600 transition-transform active:scale-95 flex items-center">
                            <i class="fas fa-passport mr-1"></i> Ëá™Âä©Â†±Âà∞
                         </a>
                    </div>
                </div>
            `;
        }

        // Backup plan event
        const snowBackupEvent = {
            type: 'spot', time: 'backup', duration: 60, travelTime: 0, travelMode: 'car',
            title: '‚ùÑÔ∏è [Èõ™Â§©ÂÇôÊ°à] Êº¢ÊãøÂ±± 1100È´òÂú∞',
            desc: 'Ëã•ÈÅá‰∏ãÈõ™ÔºåÊé®Ëñ¶ÂâçÂæÄË≥ûÈõ™ (1100 Altitude Wetland)',
            icon: 'fa-snowflake',
            bg: 'bg-sky-50 border-2 border-blue-200 border-dashed',
            note: 'Ëã•ÊúâÁ©çÈõ™ÔºåÊôØËâ≤ÁµïÁæéÔºõËã•ÁÑ°Èõ™ÂèØËµ∞ÁîüÊÖãÊ≠•ÈÅì',
            navQuery: '1100Í≥†ÏßÄ Ìú¥Í≤åÏÜå',
            isBackup: true
        };

        // Day Data (All Days)
        const day1Events = [
            { type: 'start', time: '13:30', duration: 90, travelTime: 60, travelMode: 'walk', title: 'ÂçóËãëË≤¥Ë≥ìÂÆ§ VIP Lounge', desc: 'ÂêÉÈ£ΩÂñùË∂≥ÔºåÊ∫ñÂÇôÂá∫ÁôºÔºÅ(KHH)', icon: 'fa-utensils', bg: 'bg-blue-100', btnText: 'ÊÄéÈ∫ºÂéª?', btnAction: 'showLoungeGuide', navQuery: '', externalLink: 'https://orange.udn.com/orange/story/121417/9179081' },
            { type: 'flight', time: '16:00', duration: 145, travelTime: 0, travelMode: 'plane', title: 'Âø´Ê®ÇËµ∑Ëà™ (IT670)', desc: '16:00 KHH ‚úàÔ∏è 19:25 CJU (Âê´ÊôÇÂ∑Æ)', icon: 'fa-plane-departure', bg: 'bg-orange-100', isFlight: true, navQuery: '' },
            { type: 'arrive', time: '19:25', duration: 60, travelTime: 15, travelMode: 'walk', title: 'ÊäµÈÅîÊøüÂ∑û & ÂÖ•Â¢É', desc: 'Â°´ÂØ´ÂÖ•Â¢ÉÂç°„ÄÅÊèêÈ†òË°åÊùé', icon: 'fa-passport', bg: 'bg-green-100', note: 'È†êË®à 20:25 ÂÆåÊàê', navQuery: '' },
            { type: 'car', time: 'auto', duration: 30, travelTime: 15, travelMode: 'car', title: 'The Safe Rent A Car', desc: 'Êê≠Êé•ÈßÅËªäÂâçÂæÄÂèñËªä', icon: 'fa-car', bg: 'bg-yellow-100', btnText: 'ÂèñËªäÊåáÂºï', btnAction: 'showCarGuide', navQuery: 'Î©îÏ¢ÖÍ∏ÄÎûòÎìú Ï†úÏ£º' },
            { type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null, title: 'ÊøüÂ∑û Glad Maison È£ØÂ∫ó', desc: 'Check-in ‰ºëÊÅØ', icon: 'fa-bed', bg: 'bg-purple-100', navQuery: '' }
        ];
        const day2Events = [
            { type: 'start', time: '08:00', duration: 0, travelTime: 50, travelMode: 'car', title: 'È£ØÂ∫óÂá∫Áôº', desc: 'Êó©Ëµ∑Âá∫ÁôºÂéªÂêÉË≤ùÊûúÔºÅ', icon: 'fa-sun', bg: 'bg-yellow-100', navQuery: 'Îü∞ÎçòÎ≤†Ïù¥Í∏ÄÎÆ§ÏßÄÏóÑ Ï†úÏ£º' },
            { type: 'spot', time: 'auto', duration: 90, travelTime: 15, travelMode: 'car', title: 'ÂÄ´Êï¶Ë≤ùÊûúÂçöÁâ©È§®', desc: 'London Bagel Museum Jeju (ÈúÄÊéíÈöä)', icon: 'fa-bread-slice', bg: 'bg-orange-100', note: 'ÁáüÊ•≠ÊôÇÈñì: 08:00 - 18:00', customButtons: [{ text: 'Catch Table È†êÁ¥Ñ', link: 'https://www.catchtable.net/zh-TW/shop/london_bagel_museum_jeju', icon: 'fa-calendar-check', color: 'red' }], navQuery: 'Ìï¥ÎÖÄÍπÄÎ∞• Î≥∏Ï†ê' },
            { type: 'food', time: 'auto', duration: 30, travelTime: 5, travelMode: 'walk', title: 'Êµ∑Â•≥È£ØÊç≤ (ÂèØÂ§ñÂ∏∂)', desc: 'Haenyeo Gimbap', icon: 'fa-utensils', bg: 'bg-blue-100', note: 'ÁáüÊ•≠ÊôÇÈñì: 09:00 - 14:45', navQuery: 'Ïò§ÎìúÎûëÎ≤†Ïù¥Ïª§Î¶¨' },
            { type: 'spot', time: 'auto', duration: 60, travelTime: 30, travelMode: 'car', title: 'Audrant Bakery & Âí∏Âæ∑Êµ∑ÁÅò', desc: 'ÂøÖÂêÉÂ§ßËíúÈ∫µÂåÖ & ÁµïÁæéÊûúÂáçÊµ∑', icon: 'fa-umbrella-beach', bg: 'bg-sky-100', note: 'ÁáüÊ•≠ÊôÇÈñì: 07:00 - 22:00', customButtons: [{ text: '‰ªãÁ¥π', link: 'https://dpm2bb.com/2025-62/', icon: 'fa-globe', color: 'orange' }], navQuery: 'ÏóêÏΩîÎûúÎìú ÌÖåÎßàÌååÌÅ¨' },
            { type: 'spot', time: 'auto', duration: 120, travelTime: 25, travelMode: 'car', title: 'ECOLAND Ê£ÆÊûóÂ∞èÁÅ´Ëªä', desc: 'Êê≠ÁÅ´ËªäÈÅäÊ£ÆÊûóÔºåËºïÈ¨ÜÊÑúÊÑè', icon: 'fa-train', bg: 'bg-green-100', note: 'ÂÜ¨Â≠£ÁáüÊ•≠: 08:30 - 16:30 (ÊúÄÂæåÂÖ•Â†¥)', btnText: 'Á•®ÂÉπË≥áË®ä', btnAction: 'showEcoLandPrice', navQuery: 'Ï†úÏ£ºÎ†àÏùºÎ∞îÏù¥ÌÅ¨' },
            { type: 'activity', time: 'auto', duration: 90, travelTime: 25, travelMode: 'car', title: 'ÊøüÂ∑ûÈêµÈÅìËá™Ë°åËªä', desc: 'Jeju Rail Bike (Ëá™ÂãïË°åÈßõ)', icon: 'fa-bicycle', bg: 'bg-pink-100', note: 'ÁáüÊ•≠ÊôÇÈñì: 09:00 - 17:30 (ÊØèÊï¥ÈªûÂá∫Áôº)', btnText: 'Á•®ÂÉπË≥áË®ä', btnAction: 'showRailBikePrice', navQuery: 'ÏÇºÎã¨Î¶¨' },
            snowBackupEvent,
            { type: 'spot', time: 'auto', duration: 45, travelTime: 20, travelMode: 'car', title: '‰∏âÈÅîÈáåÂ∞èÊùë & Doldam Carrot', desc: 'ÈüìÂäá„ÄäÊ≠°ËøéÂõûÂà∞‰∏âÈÅîÈáå„ÄãÊãçÊîùÂú∞', icon: 'fa-camera', bg: 'bg-yellow-50', navQuery: 'Î∂ÄÏ¥åÏãùÎãπ' },
            { type: 'dinner', time: 'auto', duration: 60, travelTime: 10, travelMode: 'car', title: 'ÊôöÈ§ê - ÂØåÊùëÈ£üÂ†Ç', desc: 'Buchon Sikdang (ÁôΩÂ∏∂È≠ö/ÈØñÈ≠ö)', icon: 'fa-fish', bg: 'bg-orange-100', note: 'ÁáüÊ•≠ÊôÇÈñì: 10:30 - 21:00', navQuery: 'ÏΩîÏóÖÏãúÌã∞Ìò∏ÌÖî ÏÑ±ÏÇ∞' },
            { type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null, title: 'ÊøüÂ∑ûÂüéÂ±±Ë≤ùÊñØÁâπÈ£ØÂ∫ó', desc: 'Coop City Hotel Seongsan', icon: 'fa-bed', bg: 'bg-purple-100', navQuery: '' }
        ];
        const day3Events = [
            { type: 'start', time: '09:00', duration: 0, travelTime: 15, travelMode: 'car', title: 'È£ØÂ∫óÂá∫Áôº', desc: 'Áù°È£ΩÂá∫ÁôºÂâçÂæÄÊ∏ØÂè£', icon: 'fa-sun', bg: 'bg-yellow-100', navQuery: 'ÏÑ±ÏÇ∞Ìè¨Ìï≠Ï¢ÖÌï©Ïó¨Í∞ùÌÑ∞ÎØ∏ÎÑê' },
            { type: 'ship', time: 'auto', duration: 30, travelTime: 0, travelMode: null, title: 'ÂüéÂ±±Ê∏Ø (Êê≠Ëàπ)', desc: 'Seongsan Port (ÂâçÂæÄÁâõÂ≥∂)', icon: 'fa-ship', bg: 'bg-blue-100', note: 'ÈúÄÂ°´ÂØ´‰πòËàπÁî≥Â†±ÂñÆ(2‰ªΩ) + Ë≠∑ÁÖß', btnText: 'ËàπÁè≠ËàáÁ•®ÂÉπ', btnAction: 'showFerryInfo', navQuery: '' },
            { type: 'spot', time: 'auto', duration: 180, travelTime: 30, travelMode: 'ship', title: 'ÁâõÂ≥∂ (Udo) Áí∞Â≥∂', desc: 'ÂøÖÂêÉËä±ÁîüÂÜ∞Ê∑áÊ∑ã„ÄÅÁÇ∏ÈÜ¨È∫µ', icon: 'fa-island-tropical', bg: 'bg-green-100', note: 'Êé®Ëñ¶ÁßüÈõªÂãïËªäÊàñÊê≠Áí∞Â≥∂Â∑¥Â£´', customButtons: [{ text: 'Ë°åÁ®ãË¶èÂäÉ', link: 'javascript:showUdoPlan()', icon: 'fa-map', color: 'orange' }], navQuery: '' },
            { type: 'arrive', time: 'auto', duration: 0, travelTime: 10, travelMode: 'car', title: 'ËøîÂõûÂüéÂ±±Ê∏Ø', desc: 'Êê≠ËàπËøîÂõûÊú¨Â≥∂', icon: 'fa-anchor', bg: 'bg-gray-100', navQuery: 'ÏïÑÏø†ÏïÑÌîåÎùºÎÑ∑ Ï†úÏ£º' },
            { type: 'spot', time: 'auto', duration: 180, travelTime: 15, travelMode: 'car', title: 'Aqua Planet Jeju', desc: '‰∫ûÊ¥≤ÊúÄÂ§ßÊ∞¥ÊóèÈ§®‰πã‰∏Ä', icon: 'fa-fish', bg: 'bg-blue-200', note: 'ÁáüÊ•≠: 09:30-19:00 / Ë°®Êºî: 13:00, 15:00, 16:50', navQuery: 'Í∏àÎèó ÏÑ±ÏÇ∞ÌùëÎèºÏßÄ' },
            snowBackupEvent,
            { type: 'dinner', time: 'auto', duration: 90, travelTime: 10, travelMode: 'car', title: 'ÈªëÊØõË±¨ÊôöÈ§ê - Í∏àÎèó ÏÑ±ÏÇ∞', desc: 'Geumdot Seongsan Black Pork', icon: 'fa-utensils', bg: 'bg-orange-100', note: 'ÁáüÊ•≠ÊôÇÈñì: 11:00 - 23:00', navQuery: 'ÏΩîÏóÖÏãúÌã∞Ìò∏ÌÖî ÏÑ±ÏÇ∞' },
            { type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null, title: 'ÊøüÂ∑ûÂüéÂ±±Ë≤ùÊñØÁâπÈ£ØÂ∫ó', desc: '‰ºëÊÅØ', icon: 'fa-bed', bg: 'bg-purple-100', navQuery: '' }
        ];
        const day4Events = [
            { type: 'food', time: '08:30', duration: 60, travelTime: 0, travelMode: null, title: 'È£ØÂ∫óÊó©È§ê', desc: '‰∫´Áî®ÁæéÂë≥Êó©È§êÔºåÈñãÂïüÁæéÂ•ΩÁöÑ‰∏ÄÂ§©', icon: 'fa-mug-hot', bg: 'bg-orange-50', navQuery: '' },
            { type: 'start', time: '09:30', duration: 0, travelTime: 50, travelMode: 'car', title: 'È£ØÂ∫óÂá∫Áôº', desc: 'ÈÄÄÊàøÂâçÂæÄË•øÊ≠∏Êµ¶', icon: 'fa-sun', bg: 'bg-yellow-100', navQuery: 'Ï†ïÎ∞©Ìè≠Ìè¨' },
            { type: 'spot', time: 'auto', duration: 60, travelTime: 10, travelMode: 'car', title: 'Ê≠£ÊàøÁÄëÂ∏É', desc: 'Jeongbang Waterfall (‰∫ûÊ¥≤ÂîØ‰∏ÄÁõ¥Êé•ÂÖ•Êµ∑)', icon: 'fa-water', bg: 'bg-blue-100', note: 'ÈñÄÁ•®: Êàê‰∫∫ 2,000 / ÂÖíÁ´• 1,000', externalLink: 'https://tinachiang0824.pixnet.net/blog/posts/9577976988', navQuery: 'ÏÑúÍ∑ÄÌè¨Îß§ÏùºÏò¨Î†àÏãúÏû•' },
            { type: 'food', time: 'auto', duration: 120, travelTime: 20, travelMode: 'car', title: 'ÊØèÊó•ÂÅ∂‰æÜÂ∏ÇÂ†¥', desc: 'Seogwipo Olle Market (ÂçàÈ§ê)', icon: 'fa-utensils', bg: 'bg-orange-100', note: 'ÂøÖÂêÉÔºöÊ©òÂ≠êÈ∫ªÁ≥¨„ÄÅÈªëË±¨ËÇâÂèØÊ®ÇÈ§Ö', externalLink: 'https://journey.tw/seogwipo-olle-market/', customButtons: [{ text: 'Âº∑ÂäõÊé®Ëñ¶', link: 'javascript:showOlleMarketRecs()', icon: 'fa-thumbs-up', color: 'red' }], navQuery: 'Í∑§ÍΩÉÎã§ÎùΩ' },
            { type: 'spot', time: 'auto', duration: 90, travelTime: 40, travelMode: 'car', title: 'Ê©òËä±Èñ£Ê®ì (Í∑§ÍΩÉÎã§ÎùΩ)', desc: 'Ë•øÊ≠∏Êµ¶Ë∂Ö‰∫∫Ê∞£Ê©òÂ≠êÂúíÂíñÂï°Âª≥', icon: 'fa-coffee', bg: 'bg-orange-50', btnText: 'ÁáüÊ•≠ËàáÊ∂àË≤ª', btnAction: 'showCafeInfo', navQuery: 'Ïã†ÌôîÏõîÎìú ÎûúÎî©Í¥Ä' },
            snowBackupEvent,
            { type: 'hotel', time: 'auto', duration: 90, travelTime: 0, travelMode: null, title: 'Á•ûË©±‰∏ñÁïå-ËóçÈºé', desc: 'Shinhwa World Landing Resort (Check-in)', icon: 'fa-hotel', bg: 'bg-purple-100', note: 'Á®ç‰Ωú‰ºëÊÅØÔºåÈÄõÈÄõÁ•ûË©±‰∏ñÁïåÂïÜÂ∫óË°ó', navQuery: '' },
            { type: 'dinner', time: '18:00', duration: 120, travelTime: 0, travelMode: null, title: 'ËóçÈºéËá™Âä©ÊôöÈ§ê', desc: 'Landing Dining (Êµ∑ÈÆÆËá™Âä©È§ê)', icon: 'fa-wine-glass-alt', bg: 'bg-yellow-200', note: '‚ö†Ô∏è Â∑≤È†êÁ¥Ñ 18:00 (ÊôÇÈñì‰∏çÂèØÂãï)', btnText: 'ÁáüÊ•≠ËàáÊ∂àË≤ª', btnAction: 'showLandingDiningInfo', externalLink: 'https://www.youtube.com/watch?v=oKv2f09cXAo', navQuery: '' },
            { type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null, title: 'Á•ûË©±‰∏ñÁïå-ËóçÈºé', desc: '‰ΩèÂÆø', icon: 'fa-bed', bg: 'bg-purple-100', navQuery: '' }
        ];
        const day5Events = [
            { type: 'start', time: '10:00', duration: 0, travelTime: 10, travelMode: 'walk', title: 'È£ØÂ∫óÂá∫Áôº', desc: 'Áù°È£ΩÈ£ΩÔºåÊ∫ñÂÇôÂéªÊ®ÇÂúíÁé©ÔºÅ', icon: 'fa-sun', bg: 'bg-yellow-100', navQuery: 'Ï†úÏ£ºÏã†ÌôîÏõîÎìú Ïã†ÌôîÌÖåÎßàÌååÌÅ¨' },
            { type: 'activity', time: 'auto', duration: 180, travelTime: 10, travelMode: 'car', title: 'Á•ûË©±‰∏ªÈ°åÂÖ¨Âúí', desc: 'Shinhwa Theme Park (Big 3)', icon: 'fa-ticket-alt', bg: 'bg-purple-100', note: '‰ΩøÁî® Big 3 Âà∏Ôºå‰ªªÈÅ∏ 3 È†ÖË®≠ÊñΩÈÅäÁé©', btnText: 'ÁáüÊ•≠ËàáÊîªÁï•', btnAction: 'showThemeParkInfo', navQuery: '1100Í≥†ÏßÄ Ìú¥Í≤åÏÜå' },
            { type: 'spot', time: 'backup', duration: 60, travelTime: 0, travelMode: 'car', title: '‚ùÑÔ∏è [Èõ™Â§©ÂÇôÊ°à] Êº¢ÊãøÂ±± 1100È´òÂú∞', desc: 'Ëã•ÈÅá‰∏ãÈõ™ÔºåÊé®Ëñ¶ÂâçÂæÄË≥ûÈõ™ (1100 Altitude Wetland)', icon: 'fa-snowflake', bg: 'bg-sky-50 border-2 border-blue-200 border-dashed', note: 'Ëã•ÊúâÁ©çÈõ™ÔºåÊôØËâ≤ÁµïÁæéÔºõËã•ÁÑ°Èõ™ÂèØËµ∞ÁîüÊÖãÊ≠•ÈÅì', navQuery: '1100Í≥†ÏßÄ Ìú¥Í≤åÏÜå', isBackup: true },
            { type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null, title: 'Á•ûË©±‰∏ñÁïå-ËóçÈºé', desc: 'ËøîÂõûÈ£ØÂ∫ó‰ºëÊÅØ / ÊôöÈ§ê', icon: 'fa-bed', bg: 'bg-purple-100', navQuery: '' }
        ];
        const day6Events = [
            { type: 'start', time: '10:00', duration: 0, travelTime: 20, travelMode: 'car', title: 'È£ØÂ∫óÂá∫Áôº', desc: 'ÈÄÄÊàøÔºåÂâçÂæÄÂ∞èÊúãÂèãÁöÑÂ§©Â†ÇÔºÅ', icon: 'fa-sun', bg: 'bg-yellow-100', navQuery: 'ÎΩÄÎ°úÎ°úÏï§ÌÉÄÏöî ÌÖåÎßàÌååÌÅ¨ Ï†úÏ£º' },
            { type: 'activity', time: 'auto', duration: 240, travelTime: 50, travelMode: 'car', title: 'Pororo & Tayo Ê®ÇÂúí', desc: 'ÂÆ§ÂÖßÂ§ñÁ∂úÂêàÂ§ßÂûãË¶™Â≠êÊ®ÇÂúí', icon: 'fa-child', bg: 'bg-blue-100', note: 'È†êÁïô 4 Â∞èÊôÇÁõ°ÊÉÖÊîæÈõª', btnText: 'ÁáüÊ•≠ËàáÁ•®ÂÉπ', btnAction: 'showPororoInfo', navQuery: 'ÎèÑÎëêÎèô Î¨¥ÏßÄÍ∞úÌï¥ÏïàÎèÑÎ°ú' },
            snowBackupEvent,
            { type: 'spot', time: 'auto', duration: 45, travelTime: 15, travelMode: 'car', title: 'ÂΩ©ËôπÊµ∑Â≤∏ÂÖ¨Ë∑Ø', desc: 'Dodu-dong Rainbow Coastal Road', icon: 'fa-rainbow', bg: 'bg-pink-50', note: 'Êï¥ÊéíÂΩ©ËôπÁü≥Â¢©ÔºåËÉåÊôØÊòØÂ§ßÊµ∑ÔºåÊãçÁÖßË∂ÖÁæé', navQuery: 'Ìò∏ÌÖîÎ†àÏò§' },
            { type: 'hotel', time: 'auto', duration: 60, travelTime: 15, travelMode: 'car', title: 'Âà©Â•ßÈ£ØÂ∫ó (Hotel Leo)', desc: 'Check-in (Êñ∞ÊøüÂ∑û)', icon: 'fa-hotel', bg: 'bg-purple-100', note: 'ÊîæË°åÊùéÔºåÁ®ç‰Ωú‰ºëÊÅØ', navQuery: 'ÏàôÏÑ±ÎèÑ ÎÖ∏ÌòïÏ†ê' },
            { type: 'dinner', time: '18:30', duration: 90, travelTime: 10, travelMode: 'walk', title: 'ÊôöÈ§ê - ÁÜüÊàêÂà∞ÁáíËÇâ', desc: 'Suksungdo (ÁÜüÊàêÈªëË±¨ËÇâ)', icon: 'fa-fire-alt', bg: 'bg-red-100', note: '‚ö†Ô∏è Â∑≤Ë®Ç‰Ωç 18:30 (È†ê‰ªòË®ÇÈáë 30,000ÂÖÉ)', btnText: 'Ë®Ç‰ΩçËàáËèúÂñÆ', btnAction: 'showSuksungdoInfo', navQuery: 'Ìò∏ÌÖîÎ†àÏò§' },
            { type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null, title: 'Âà©Â•ßÈ£ØÂ∫ó', desc: '‰ºëÊÅØ', icon: 'fa-bed', bg: 'bg-purple-100', navQuery: '' }
        ];
        const day7Events = [
            { type: 'start', time: '09:30', duration: 0, travelTime: 20, travelMode: 'car', title: 'È£ØÂ∫óÂá∫Áôº', desc: 'Áù°È£ΩÈ£ΩÔºåÂâçÂæÄËàäÊøüÂ∑ûÊé¢Á¥¢', icon: 'fa-sun', bg: 'bg-yellow-100', navQuery: 'Ï†úÏ£ºÎèôÎ¨∏ÏãúÏû•' },
            { type: 'spot', time: 'auto', duration: 60, travelTime: 10, travelMode: 'walk', title: 'ÊøüÂ∑ûÊù±ÈñÄÂ∏ÇÂ†¥', desc: 'Jeju Dongmun Market', icon: 'fa-store', bg: 'bg-orange-100', note: 'Êó©‰∏äË≤∑‰º¥ÊâãÁ¶Æ/Ê∞¥ÊûúÊØîËºÉÂ∞ë‰∫∫', navQuery: 'Ï†úÏ£ºÏ§ëÏïôÏßÄÌïòÏÉÅÍ∞Ä' },
            { type: 'shopping', time: 'auto', duration: 90, travelTime: 15, travelMode: 'car', title: '‰∏≠Â§ÆÂú∞‰∏ãË°ó / ‰∏≠Â§ÆË°óÂ∏ÇÂ†¥', desc: 'Jungang Underground Shopping Center', icon: 'fa-shopping-bag', bg: 'bg-blue-100', note: 'Â•ΩÈÄõÂ•ΩË≤∑ÁöÑË≥ºÁâ©Â§©Â†Ç', customButtons: [{ text: 'Âº∑ÂäõÊé®Ëñ¶', link: 'javascript:showJungangRecs()', icon: 'fa-thumbs-up', color: 'red' }], navQuery: 'ÏûêÎß§Íµ≠Ïàò' },
            { type: 'food', time: 'auto', duration: 60, travelTime: 20, travelMode: 'car', title: 'ÂçàÈ§ê - ÂßäÂ¶πÈ∫µÊ¢ù', desc: 'Jamae Guksu (ÂøÖÂêÉË±¨ËÇâÊπØÈ∫µ)', icon: 'fa-utensils', bg: 'bg-red-100', note: 'ÊéíÈöäÂêçÂ∫óÔºåÊπØÈ†≠ÊøÉÈÉÅ', navQuery: 'Î∏åÎ¶≠Ï∫†ÌçºÏä§' },
            { type: 'spot', time: 'auto', duration: 90, travelTime: 20, travelMode: 'car', title: 'Brick Campus (ÂÇôÊ°à)', desc: 'Ê®ÇÈ´òÁ©çÊú®Ê†°Âúí (Èõ®Â§©/ÂÆ§ÂÖßÂÇôÊ°à)', icon: 'fa-cube', bg: 'bg-purple-100', note: 'Ê®ÇÈ´òËø∑ÂøÖÂéªÔºåÂÖÖÊªøÂâµÊÑè', navQuery: 'Î°ØÎç∞ÎßàÌä∏ Ï†úÏ£ºÏ†ê' },
            snowBackupEvent,
            { type: 'shopping', time: 'auto', duration: 120, travelTime: 10, travelMode: 'walk', title: 'ËìÆÊ¥ûÂïÜÂúà / Ê®ÇÂ§©Ë∂ÖÂ∏Ç', desc: 'Yeondong / Lotte Mart', icon: 'fa-shopping-cart', bg: 'bg-green-100', note: 'ÊúÄÂæåÊé°Ë≤∑Ê©üÊúÉÔºÅ', navQuery: 'ÍµêÏ¥åÏπòÌÇ® Ïó∞ÎèôÏ†ê' },
            { type: 'dinner', time: 'auto', duration: 90, travelTime: 10, travelMode: 'walk', title: 'ÊôöÈ§ê - Ê©ãÊùëÁÇ∏Èõû', desc: 'Kyochon Chicken (ËìÆÊ¥ûÂ∫ó)', icon: 'fa-drumstick-bite', bg: 'bg-yellow-200', note: 'ÂøÖÈªûÔºöËúÇËúúÁÇ∏Èõû (Honey Series)', navQuery: 'Ìò∏ÌÖîÎ†àÏò§' },
            { type: 'hotel', time: 'auto', duration: 0, travelTime: 0, travelMode: null, title: 'Âà©Â•ßÈ£ØÂ∫ó', desc: 'ÊâìÂåÖË°åÊùéÔºåÊ∫ñÂÇôÂõûÁ®ã', icon: 'fa-bed', bg: 'bg-purple-100', navQuery: '' }
        ];
        const day8Events = [
            { type: 'start', time: '09:30', duration: 0, travelTime: 20, travelMode: 'car', title: 'È£ØÂ∫óÂá∫Áôº', desc: 'ÈÄÄÊàøÔºåÊääÊè°ÊúÄÂæåÊôÇÂÖâÔºÅ', icon: 'fa-sun', bg: 'bg-yellow-100', navQuery: 'Ïù¥Ìò∏ÌÖåÏö∞ÎßêÎì±ÎåÄ' },
            { type: 'spot', time: 'auto', duration: 30, travelTime: 25, travelMode: 'car', title: 'Ê¢®ÊπñÂ∞èÈ¶¨ÁáàÂ°î', desc: 'Iho Tewoo Horse Lighthouses', icon: 'fa-camera', bg: 'bg-red-50', note: 'Á¥ÖÁôΩÂ∞èÈ¶¨ÁáàÂ°îÔºåÊãçÁÖßÊâìÂç°ËÅñÂú∞', navQuery: 'Ïï†ÏõîÏπ¥ÌéòÍ±∞Î¶¨' },
            { type: 'food', time: 'auto', duration: 90, travelTime: 25, travelMode: 'car', title: 'ÊÑõÊúàÈÇëÂíñÂï°Ë°ó / ÂçàÈ§ê', desc: 'Aewol Cafe Street', icon: 'fa-coffee', bg: 'bg-orange-100', note: 'Êé®Ëñ¶ÔºöRandy\'s Donuts ÊàñÊµ∑ÊôØÂíñÂï°Âª≥', navQuery: 'ÏïÑÎ•¥ÎñºÎÆ§ÏßÄÏóÑ Ï†úÏ£º' },
            { type: 'spot', time: 'auto', duration: 90, travelTime: 40, travelMode: 'car', title: 'Arte Museum', desc: 'ÂÖâÂΩ±ËóùË°ìÈ§® (Ê≤âÊµ∏ÂºèÈ´îÈ©ó)', icon: 'fa-palette', bg: 'bg-purple-100', note: 'Èõ®Â§©ÂÇôÊ°àÈ¶ñÈÅ∏ÔºåË¶ñË¶∫È•óÂÆ¥', navQuery: 'ÎçîÏÑ∏Ïù¥ÌîÑÎ†åÌÑ∞Ïπ¥' },
            { type: 'car', time: '16:30', duration: 30, travelTime: 15, travelMode: 'walk', title: 'ÈÇÑËªä - The Safe Rent A Car', desc: 'Return Rental Car', icon: 'fa-car', bg: 'bg-green-100', note: 'Ê™¢Êü•ËªäÊ≥ÅÔºåÊê≠‰πòÊé•ÈßÅËªäÂâçÂæÄÊ©üÂ†¥', navQuery: 'Ï†úÏ£ºÍµ≠Ï†úÍ≥µÌï≠' },
            { type: 'flight', time: '18:15', duration: 120, travelTime: 0, travelMode: null, title: 'ÊøüÂ∑ûÊ©üÂ†¥Â†±Âà∞', desc: 'Jeju Int\'l Airport (CJU)', icon: 'fa-plane-departure', bg: 'bg-blue-200', note: 'Ëæ¶ÁêÜÁôªÊ©ü„ÄÅÈÄÄÁ®Ö„ÄÅÊúÄÂæåÂÖçÁ®ÖÂ∫óË°ùÂà∫' },
            { type: 'flight', time: '20:15', duration: 0, travelTime: 0, travelMode: null, title: 'Ëµ∑È£õÂõûÁ®ã (IT671)', desc: '20:15 CJU ‚úàÔ∏è 21:50 KHH', icon: 'fa-home', bg: 'bg-blue-600 text-white', navQuery: '' }
        ];

        const allSpots = [
            { name: "ÂçóËãëË≤¥Ë≥ìÂÆ§ VIP Lounge", desc: "È´òÈõÑÊ©üÂ†¥ËàíÈÅ©‰ºëÊÅØÔºåÂêÉÈ£ΩÂñùË∂≥ÈñãÂïüÊóÖÁ®ã„ÄÇ", img: "https://images.unsplash.com/photo-1572579893796-03c02d25f778?auto=format&fit=crop&w=600&q=80", tape: "tape-blue", sticker: "‚òï" },
            { name: "ÂÄ´Êï¶Ë≤ùÊûúÂçöÁâ©È§®", desc: "Ë∂Ö‰∫∫Ê∞£ÊéíÈöäÂêçÂ∫óÔºåÂøÖÂêÉËî•Â•∂Ê≤πË≤ùÊûú„ÄÇ", img: "https://images.unsplash.com/photo-1629198688000-71f23e745b6e?auto=format&fit=crop&w=600&q=80", tape: "tape-yellow", sticker: "ü•Ø" },
            { name: "Êµ∑Â•≥È£ØÊç≤", desc: "ÊøüÂ∑ûÁâπËâ≤ÁæéÈ£üÔºåÂè£ÊÑüË±êÂØåÁöÑÊµ∑Â•≥È£ØÊç≤„ÄÇ", img: "https://images.unsplash.com/photo-1563245372-f21724e3856d?auto=format&fit=crop&w=600&q=80", tape: "tape-green", sticker: "üçô" },
            { name: "Âí∏Âæ∑Êµ∑ÁÅò & Audrant", desc: "Êº∏Â±§ÊûúÂáçÊµ∑ÊôØËàáÂøÖÂêÉÂ§ßËíúÈ∫µÂåÖ„ÄÇ", img: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=600&q=80", tape: "tape-blue", sticker: "üèñÔ∏è" },
            { name: "ECOLAND Ê£ÆÊûóÂ∞èÁÅ´Ëªä", desc: "Êê≠‰πòËã±ÂºèÂæ©Âè§Â∞èÁÅ´ËªäÔºåÊº´ÈÅäËëõÊü•Áì¶ÂéüÂßãÊûó„ÄÇ", img: "https://images.unsplash.com/photo-1442544213729-6a15f1611937?auto=format&fit=crop&w=600&q=80", tape: "tape-green", sticker: "üöÇ" },
            { name: "ÊøüÂ∑ûÈêµÈÅìËá™Ë°åËªä", desc: "Ëá™ÂãïË°åÈßõËá™Ë°åËªäÔºåËºïÈ¨ÜÊ¨£Ë≥ûÈæçËá•Â≤≥ËàáËçâÂéüÈ¢®ÂÖâ„ÄÇ", img: "https://images.unsplash.com/photo-1533230332213-913a69a9094e?auto=format&fit=crop&w=600&q=80", tape: "tape-pink", sticker: "üö≤" },
            { name: "‰∏âÈÅîÈáåÂ∞èÊùë", desc: "ÈüìÂäáÊãçÊîùÂú∞ÔºåÊÑüÂèóÂØßÈùúÁöÑÊøüÂ∑ûÂ∞èÊºÅÊùëÊ∞õÂúç„ÄÇ", img: "https://images.unsplash.com/photo-1517760444937-f6397edcbbcd?auto=format&fit=crop&w=600&q=80", tape: "tape-yellow", sticker: "üè°" },
            { name: "ÂØåÊùëÈ£üÂ†Ç", desc: "CPÂÄºË∂ÖÈ´òÁöÑÁôΩÂ∏∂È≠öÁÖÆÁâ©ÂÆöÈ£üÔºåÂú®Âú∞‰∫∫Êé®Ëñ¶„ÄÇ", img: "https://images.unsplash.com/photo-1555126634-323283e090fa?auto=format&fit=crop&w=600&q=80", tape: "tape-orange", sticker: "üêü" },
            { name: "ÁâõÂ≥∂ Udo", desc: "ÁµïÁæéÈõ¢Â≥∂ÔºåÈ®éÈõªÂãïËªäÁí∞Â≥∂ÔºåÂìÅÂöêËä±ÁîüÂÜ∞Ê∑áÊ∑ã„ÄÇ", img: "https://images.unsplash.com/photo-1629252392482-9092495d436a?auto=format&fit=crop&w=600&q=80", tape: "tape-blue", sticker: "ü•ú" },
            { name: "Aqua Planet Jeju", desc: "‰∫ûÊ¥≤ÊúÄÂ§ßÁ¥öÊ∞¥ÊóèÈ§®ÔºåÁ≤æÂΩ©Êµ∑Â•≥Ë°®ÊºîÂøÖÁúã„ÄÇ", img: "https://images.unsplash.com/photo-1583212235753-9c52728806c5?auto=format&fit=crop&w=600&q=80", tape: "tape-blue", sticker: "üê¨" },
            { name: "ÈáëË±öÈªëË±¨ËÇâ (ÂüéÂ±±)", desc: "ÊøüÂ∑ûÂ≥∂ÂøÖÂêÉÈªëË±¨ËÇâÔºåËÇâË≥™ÈÆÆÁæé„ÄÇ", img: "https://images.unsplash.com/photo-1603073707010-85c378943336?auto=format&fit=crop&w=600&q=80", tape: "tape-red", sticker: "ü•©" },
            { name: "Ê≠£ÊàøÁÄëÂ∏É", desc: "‰∫ûÊ¥≤ÂîØ‰∏ÄÁõ¥Êé•ÂÖ•Êµ∑ÁöÑÁÄëÂ∏ÉÔºåÂ£ØËßÄÊá∏Â¥ñËàáÊµ∑ÊôØ„ÄÇ", img: "https://images.unsplash.com/photo-1549880181-56a44cf4a9a5?auto=format&fit=crop&w=600&q=80", tape: "tape-green", sticker: "üåä" },
            { name: "ÊØèÊó•ÂÅ∂‰æÜÂ∏ÇÂ†¥", desc: "Ë•øÊ≠∏Êµ¶ÊúÄÂ§ßÂÇ≥Áµ±Â∏ÇÂ†¥ÔºåÊ©òÂ≠êÈ∫ªÁ≥¨„ÄÅÂèØÊ®ÇÈ§ÖÂøÖÂêÉ„ÄÇ", img: "https://images.unsplash.com/photo-1533900298318-6b8da08a523e?auto=format&fit=crop&w=600&q=80", tape: "tape-orange", sticker: "üç¢" },
            { name: "Ê©òËä±Èñ£Ê®ì", desc: "Èö±Ë∫´Âú®Ê©òÂ≠êÂúíË£°ÁöÑÁ∂≤ÁæéÂíñÂï°Âª≥ÔºåÊØèÂÄãËßíËêΩÈÉΩÂ•ΩÊãç„ÄÇ", img: "https://images.unsplash.com/photo-1611143669185-af224c5e3252?auto=format&fit=crop&w=600&q=80", tape: "tape-yellow", sticker: "‚òï" },
            { name: "ËóçÈºéËá™Âä©ÊôöÈ§ê", desc: "Á•ûË©±‰∏ñÁïåÈ´òÁ¥öÊµ∑ÈÆÆËá™Âä©È§êÔºåÂ∏ùÁéãËüπÂêÉÂà∞È£Ω„ÄÇ", img: "https://images.unsplash.com/photo-1544148103-0773bf10d330?auto=format&fit=crop&w=600&q=80", tape: "tape-yellow", sticker: "üçΩÔ∏è" },
            { name: "Á•ûË©±‰∏ªÈ°åÂÖ¨Âúí", desc: "ÈÄóÈÄóËü≤‰∏ªÈ°åÊ®ÇÂúíÔºåË®≠ÊñΩË±êÂØåÔºåËâ≤ÂΩ©ÁπΩÁ¥õ„ÄÇ", img: "https://images.unsplash.com/photo-1505761671935-60b3a7427bad?auto=format&fit=crop&w=600&q=80", tape: "tape-pink", sticker: "üé°" },
            { name: "Êº¢ÊãøÂ±± 1100È´òÂú∞", desc: "ÂÜ¨Â≠£Ë≥ûÈõ™ÂãùÂú∞ÔºåËªäÂ≠êÂèØÁõ¥ÈÅîÔºåËºïÈ¨ÜË≥ûÈõ™„ÄÇ", img: "https://images.unsplash.com/photo-1483921020237-60f3e5e54c33?auto=format&fit=crop&w=600&q=80", tape: "tape-blue", sticker: "‚ùÑÔ∏è" },
            { name: "Pororo Ê®ÇÂúí", desc: "Â∞èÂ≠©ÁöÑÂ§¢ÂπªÂ§©Â†ÇÔºåÂÆ§ÂÖßÂ§ñË®≠ÊñΩÈΩäÂÖ®ÔºåÊîæÈõªÈ¶ñÈÅ∏„ÄÇ", img: "https://images.unsplash.com/photo-1596461404969-9ae70f2830c1?auto=format&fit=crop&w=600&q=80", tape: "tape-yellow", sticker: "üêß" },
            { name: "ÂΩ©ËôπÊµ∑Â≤∏ÂÖ¨Ë∑Ø", desc: "‰∏ÉÂΩ©Áü≥Â¢©Á∂øÂª∂Êµ∑Â≤∏Á∑öÔºåËÉåÊôØÊòØËóçÂ§©Â§ßÊµ∑ÔºåÊãçÁÖßÊïàÊûúÊªøÂàÜ„ÄÇ", img: "https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=600&q=80", tape: "tape-pink", sticker: "üåà" },
            { name: "ÁÜüÊàêÂà∞ÁáíËÇâ", desc: "Ë∂Ö‰∫∫Ê∞£ÁÜüÊàêÈªëË±¨ËÇâÔºåÈúÄÊèêÂâçÈ†êÁ¥ÑÁöÑÁæéÂë≥„ÄÇ", img: "https://images.unsplash.com/photo-1603073707010-85c378943336?auto=format&fit=crop&w=600&q=80", tape: "tape-red", sticker: "ü•©" },
            { name: "ÊøüÂ∑ûÊù±ÈñÄÂ∏ÇÂ†¥", desc: "ÊøüÂ∑ûÊúÄÂ§ßÂ∏ÇÂ†¥Ôºå‰º¥ÊâãÁ¶Æ„ÄÅÊ∞¥Êûú„ÄÅÂ§úÂ∏ÇÂ∞èÂêÉ„ÄÇ", img: "https://images.unsplash.com/photo-1555126634-323283e090fa?auto=format&fit=crop&w=600&q=80", tape: "tape-orange", sticker: "üõçÔ∏è" },
            { name: "‰∏≠Â§ÆÂú∞‰∏ãË°ó", desc: "Ë≥ºÁâ©Â§©Â†ÇÔºåÊúçÈ£æ„ÄÅÁæéÂ¶ù„ÄÅÈõúË≤®ÊáâÊúâÁõ°Êúâ„ÄÇ", img: "https://images.unsplash.com/photo-1550989460-0adf9ea622e2?auto=format&fit=crop&w=600&q=80", tape: "tape-yellow", sticker: "üëï" },
            { name: "ÂßäÂ¶πÈ∫µÊ¢ù", desc: "ÊéíÈöäÂêçÂ∫óÔºåÊøÉÈÉÅË±¨ËÇâÊπØÈ∫µÊòØÊøüÂ∑û‰ª£Ë°®ÁæéÈ£ü„ÄÇ", img: "https://images.unsplash.com/photo-1579888944880-d98341245702?auto=format&fit=crop&w=600&q=80", tape: "tape-yellow", sticker: "üçú" },
            { name: "Brick Campus", desc: "Ê®ÇÈ´òÁ©çÊú®‰∏ªÈ°åÂçöÁâ©È§®ÔºåÂâµÊÑèÁÑ°ÈôêÔºåÈõ®Â§©ÂÇôÊ°à„ÄÇ", img: "https://images.unsplash.com/photo-1585366119957-e9730b6d0f60?auto=format&fit=crop&w=600&q=80", tape: "tape-blue", sticker: "üß±" },
            { name: "Ê©ãÊùëÁÇ∏Èõû", desc: "ÈüìÂúãÂúãÊ∞ëÁÇ∏ÈõûÔºåËúÇËúúÂè£Âë≥ÈÖ•ËÑÜÈ¶ôÁîú„ÄÇ", img: "https://images.unsplash.com/photo-1626082927389-6cd097cdc6ec?auto=format&fit=crop&w=600&q=80", tape: "tape-orange", sticker: "üçó" },
            { name: "Ê¢®ÊπñÂ∞èÈ¶¨ÁáàÂ°î", desc: "Á¥ÖÁôΩÈõôËâ≤Â∞èÈ¶¨ÈÄ†ÂûãÁáàÂ°îÔºåÊãçÁÖßÊâìÂç°ËÅñÂú∞„ÄÇ", img: "https://images.unsplash.com/photo-1569336415962-a4bd9f69cd83?auto=format&fit=crop&w=600&q=80", tape: "tape-red", sticker: "üê¥" },
            { name: "ÊÑõÊúàÈÇëÂíñÂï°Ë°ó", desc: "Êµ∑ÊôØÂíñÂï°Âª≥‰∏ÄÁ¥öÊà∞ÂçÄÔºåÊó•ËêΩË∂ÖÁæé„ÄÇ", img: "https://images.unsplash.com/photo-1517487881594-2787fef5ebf7?auto=format&fit=crop&w=600&q=80", tape: "tape-orange", sticker: "üåä" },
            { name: "Arte Museum", desc: "Â§ßÂûãÊ≤âÊµ∏ÂºèÂÖâÂΩ±ËóùË°ìÂ±ïÔºåË¶ñË¶∫ÈúáÊíº„ÄÇ", img: "https://images.unsplash.com/photo-1550684848-fac1c5b4e853?auto=format&fit=crop&w=600&q=80", tape: "tape-purple", sticker: "üñºÔ∏è" }
        ];

        const tabs = [
            { id: 'flight', icon: 'fa-paper-plane', label: 'Ëà™Áè≠', color: 'bg-blue-100' },
            { id: 'rate', icon: 'fa-won-sign', label: 'ÂåØÁéá', color: 'bg-yellow-100' },
            { id: 'weather', icon: 'fa-sun', label: 'Ê∞£Ë±°', color: 'bg-sky-100' },
            { id: 'intro', icon: 'fa-map-marked-alt', label: 'ÊôØÈªû', color: 'bg-orange-100' },
            { id: 'prep', icon: 'fa-check-circle', label: 'Ê∫ñÂÇô', color: 'bg-green-100' },
            { id: 'booking', icon: 'fa-file-alt', label: 'ÊÜëË≠â', color: 'bg-purple-100' }, 
            { id: 'day1', label: 'Day1', date: '1/30', week: '(‰∫î)', color: 'bg-red-50' },
            { id: 'day2', label: 'Day2', date: '1/31', week: '(ÂÖ≠)', color: 'bg-red-50' },
            { id: 'day3', label: 'Day3', date: '2/01', week: '(Êó•)', color: 'bg-red-50' },
            { id: 'day4', label: 'Day4', date: '2/02', week: '(‰∏Ä)', color: 'bg-red-50' },
            { id: 'day5', label: 'Day5', date: '2/03', week: '(‰∫å)', color: 'bg-red-50' },
            { id: 'day6', label: 'Day6', date: '2/04', week: '(‰∏â)', color: 'bg-red-50' },
            { id: 'day7', label: 'Day7', date: '2/05', week: '(Âõõ)', color: 'bg-red-50' },
            { id: 'day8', label: 'Day8', date: '2/06', week: '(‰∫î)', color: 'bg-red-50' },
        ];

        const passengersOutbound = [
            { name: "LI,I-KUN", seat: "2A", bag: "15KG" },
            { name: "CHEN,YING-YU", seat: "2C", bag: "15KG" },
            { name: "LI,ZHI-QI", seat: "2B", bag: "15KG" },
            { name: "HUNG,TSUNG-WEI", seat: "3F", bag: "20KG" },
            { name: "HUANG,CHING-TING", seat: "2E", bag: "20KG" },
            { name: "HUNG,SHAO-CHI", seat: "2F", bag: "20KG" },
            { name: "HUNG,SHAO-JIE", seat: "2D", bag: "20KG" }
        ];

        const passengersInbound = [
            { name: "LI,I-KUN", seat: "2F", bag: "25KG" },
            { name: "CHEN,YING-YU", seat: "2D", bag: "25KG" },
            { name: "LI,ZHI-QI", seat: "2E", bag: "20KG" },
            { name: "HUNG,TSUNG-WEI", seat: "4C", bag: "20KG" },
            { name: "HUANG,CHING-TING", seat: "4E", bag: "20KG" },
            { name: "HUNG,SHAO-CHI", seat: "4F", bag: "20KG" },
            { name: "HUNG,SHAO-JIE", seat: "4D", bag: "20KG" }
        ];

        document.addEventListener('DOMContentLoaded', () => {
            renderMenu();
            updateCountdown();
            loadContent('day1'); 
            fetchRate();
            fetchWeather();
        });

        function renderMenu() {
            const menu = document.getElementById('tab-menu');
            const mainTabs = tabs.slice(0, 6);
            const dayTabs = tabs.slice(6, 14);

            const renderMainBtn = (tab) => `
                <button onclick="loadContent('${tab.id}')" 
                        id="btn-${tab.id}"
                        class="sticker-tab flex flex-col items-center justify-center p-1 rounded-t-xl text-slate-600 ${tab.color} border-t border-x border-black/5 h-11 w-full transition-all">
                    <i class="fas ${tab.icon} text-xs mb-0.5"></i>
                    <span class="font-bold text-[10px] font-hand whitespace-nowrap leading-none">${tab.label}</span>
                </button>
            `;

            const renderDayBtn = (tab) => `
                <button onclick="loadContent('${tab.id}')" 
                        id="btn-${tab.id}"
                        class="sticker-tab flex flex-col items-center justify-center p-0.5 rounded-b-lg text-slate-600 ${tab.color} border-b border-x border-black/5 h-12 w-full transition-all">
                    <span class="text-[9px] leading-none mb-0.5 whitespace-nowrap font-sans text-slate-500 font-bold scale-90">${tab.date}</span>
                    <span class="text-[8px] leading-none mb-0.5 whitespace-nowrap font-sans text-slate-400 font-bold scale-90">${tab.week}</span>
                    <span class="font-bold text-[10px] font-hand whitespace-nowrap leading-none text-jeju-orange">${tab.label}</span>
                </button>
            `;

            menu.innerHTML = `
                <div class="grid grid-cols-6 gap-1 w-full px-1">${mainTabs.map(renderMainBtn).join('')}</div>
                <div class="grid grid-cols-8 gap-0.5 w-full px-1 mt-1">${dayTabs.map(renderDayBtn).join('')}</div>
            `;
        }

        function updateCountdown() {
            const start = new Date(tripStartDate).getTime();
            const now = new Date().getTime();
            const distance = start - now;
            const days = Math.floor(distance / (1000 * 60 * 60 * 24));
            const cdEl = document.getElementById('countdown');
            if (distance < 0) { cdEl.innerHTML = "ÊóÖÁ®ã‰∏≠"; } else { cdEl.innerHTML = `${days + 1} Days Left`; }
        }

        function loadContent(tabId) {
            document.querySelectorAll('.sticker-tab').forEach(btn => {
                btn.classList.remove('active');
                btn.classList.add('opacity-90');
            });
            const activeBtn = document.getElementById(`btn-${tabId}`);
            if(activeBtn) {
                activeBtn.classList.add('active'); 
                activeBtn.classList.remove('opacity-90');
            }
            const contentArea = document.getElementById('content-area');
            contentArea.innerHTML = getContent(tabId);
            if(tabId === 'rate') {
                fetchRate();
                renderExpenses();
            }
            if(tabId === 'weather') fetchWeather();
            window.scrollTo({top: 0, behavior: 'smooth'});
        }

        function renderScheduleList(events, titleText) {
            let html = `<div class="mb-6 text-center"><h2 class="washi-tape-title text-xl font-bold text-slate-700 font-hand tracking-wide">${titleText}</h2></div>`;
            html += '<div class="relative pl-2 space-y-2"><div class="absolute left-4 top-2 bottom-4 w-0.5 bg-slate-300 border-l-2 border-dashed border-slate-300 z-0"></div>';

            let currentTime = null;

            events.forEach((event, index) => {
                let displayTime = event.time;
                if (event.time === 'backup') {
                    displayTime = 'ÂΩàÊÄß';
                } else if (index === 0) {
                    currentTime = moment(event.time, "HH:mm");
                } else if (event.time === 'auto') {
                    const prevEvent = events[index - 1];
                    if (prevEvent.time !== 'backup') {
                        const addedMinutes = (prevEvent.duration || 0) + (prevEvent.travelTime || 0);
                        currentTime = currentTime.clone().add(addedMinutes, 'minutes');
                    }
                    displayTime = currentTime.format('HH:mm');
                } else {
                    currentTime = moment(event.time, "HH:mm");
                }

                const hasBtn = event.btnText && event.btnAction;
                const hasExtLink = event.externalLink;
                const customButtons = event.customButtons || [];
                const durationHtml = (event.duration > 0 && event.time !== 'backup') ? `<span class="text-[10px] text-slate-400 font-hand ml-2 bg-slate-50 px-1 rounded"><i class="fas fa-hourglass-half mr-1"></i>${event.duration}m</span>` : '';
                const detailsHtml = event.details || '';
                
                const cardBg = event.isBackup ? 'bg-sky-50 border-2 border-blue-200 border-dashed' : 'bg-white border border-slate-100 shadow-sm';
                const timeBg = event.isBackup ? 'bg-blue-200 text-white' : `${event.bg}`;

                html += `
                    <div class="relative pl-8 mb-0 z-10">
                        <div class="absolute left-0 -translate-x-1/4 ${event.bg} border-4 border-paper w-8 h-8 rounded-full flex items-center justify-center z-10 shadow-sm text-slate-600"><i class="fas ${event.icon} text-xs"></i></div>
                        <div class="${cardBg} p-4 rounded-xl hover:shadow-md transition-shadow relative group">
                            <div class="flex justify-between items-center mb-1">
                                <div class="flex items-center">
                                    <div class="inline-block ${timeBg} text-slate-800 text-xs px-2 py-1 rounded font-bold font-hand tracking-wider shadow-sm">${displayTime}</div>
                                    ${durationHtml}
                                </div>
                            </div>
                            <h4 class="font-bold text-lg text-slate-800 leading-tight">${event.title}</h4>
                            <p class="text-slate-500 text-sm mt-1 font-hand">${event.desc}</p>
                            <div class="mt-3 flex flex-wrap gap-2">
                                ${hasBtn ? `<button onclick="${event.btnAction}()" class="text-xs bg-slate-100 hover:bg-slate-200 text-slate-600 px-3 py-1.5 rounded-full transition-colors font-bold flex items-center gap-1 border border-slate-300 border-dashed"><i class="fas fa-lightbulb text-jeju-orange"></i> ${event.btnText}</button>` : ''}
                                ${hasExtLink ? `<a href="${event.externalLink}" target="_blank" class="text-xs bg-orange-50 hover:bg-orange-100 text-orange-600 px-3 py-1.5 rounded-full transition-colors font-bold flex items-center gap-1 border border-orange-200 border-dashed"><i class="fas fa-globe"></i> ‰ªãÁ¥π</a>` : ''}
                                ${customButtons.map(btn => {
                                    if (btn.link.startsWith('javascript:')) {
                                        return `<button onclick="${btn.link.replace('javascript:', '')}" class="text-xs bg-${btn.color}-50 hover:bg-${btn.color}-100 text-${btn.color}-600 px-3 py-1.5 rounded-full transition-colors font-bold flex items-center gap-1 border border-${btn.color}-200 border-dashed"><i class="fas ${btn.icon}"></i> ${btn.text}</button>`;
                                    } else {
                                        return `<a href="${btn.link}" target="_blank" class="text-xs bg-${btn.color}-50 hover:bg-${btn.color}-100 text-${btn.color}-600 px-3 py-1.5 rounded-full transition-colors font-bold flex items-center gap-1 border border-${btn.color}-200 border-dashed"><i class="fas ${btn.icon}"></i> ${btn.text}</a>`;
                                    }
                                }).join('')}
                            </div>
                            ${detailsHtml}
                            ${event.note ? `<div class="mt-2 text-[10px] text-slate-400 bg-slate-50 p-1 rounded inline-block"><i class="fas fa-info-circle mr-1"></i>${event.note}</div>` : ''}
                        </div>
                    </div>
                `;

                if (event.travelTime > 0 && event.travelMode && !event.isBackup) {
                    let travelEmoji = 'üö∂'; 
                    if (event.travelMode === 'car') travelEmoji = 'üöó';
                    if (event.travelMode === 'plane') travelEmoji = '‚úàÔ∏è';
                    if (event.travelMode === 'ship') travelEmoji = '‚õ¥Ô∏è';
                    let navButtonHtml = '';
                    if (event.navQuery && event.navQuery.length > 0) {
                        const navUrl = `https://map.naver.com/p/search/${encodeURIComponent(event.navQuery)}`;
                        navButtonHtml = `<a href="${navUrl}" target="_blank" class="ml-2 bg-green-50 text-green-600 border border-green-200 px-3 py-1 rounded-full text-[10px] font-bold shadow-sm flex items-center gap-1 transition-all active:scale-95"><i class="fas fa-location-arrow"></i> Â∞éËà™</a>`;
                    }
                    html += `<div class="relative pl-8 py-3 z-0"><div class="flex items-center text-slate-500 text-xs ml-2"><div class="w-7 h-7 rounded-full bg-white flex items-center justify-center mr-2 border border-slate-200 shadow-sm text-sm select-none">${travelEmoji}</div><span class="font-hand font-bold mr-1 text-slate-400">${event.travelTime} min</span>${navButtonHtml}</div></div>`;
                } else if (index < events.length - 1) {
                    html += `<div class="h-4"></div>`;
                }
            });
            html += '</div>';
            return html;
        }

        window.closeModal = function() { document.getElementById('info-modal').classList.add('hidden'); }
        window.showLoungeGuide = function() {
            document.getElementById('modal-content-area').innerHTML = `<div class="text-left relative"><div class="absolute -top-2 -right-2 text-4xl opacity-20 rotate-12">‚òï</div><h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-dashed border-slate-200 pb-3 font-hand tracking-wide">ÂçóËãëË≤¥Ë≥ìÂÆ§ÊåáÂºï</h3><div class="bg-blue-50 p-4 rounded-xl mb-4 text-sm text-slate-700 shadow-inner border border-blue-100"><strong>Âú∞ÈªûÔºö</strong> È´òÈõÑÂ∞èÊ∏ØÊ©üÂ†¥ ÂúãÈöõËà™Âªà 3F</div><div class="space-y-3 font-hand text-lg text-slate-600"><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">1</span><span>ÈÄöÈÅéË≠âÁÖßÊü•È©óÊ´ÉÊ™ØÈÄ≤ÂÖ•ÂÖçÁ®ÖÂ∫óÂçÄ</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">2</span><span>Áõ¥Êé•<strong class="text-jeju-blue mx-1">„ÄåÂêëÂ∑¶ËΩâ„Äç</strong>(ÂæÄ 21-26 ÁôªÊ©üÈñÄÊñπÂêë)</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">3</span><span>Ê≤øËëóÈï∑ÂªäÁõ¥Ëµ∞Âà∞Â∫ï</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">4</span><span>‰ΩçÊñº <strong class="text-jeju-orange mx-1">22 ËôüÁôªÊ©üÈñÄ</strong> ÈôÑËøë</span></div></div><div class="mt-4 bg-orange-50 p-3 rounded-lg text-sm text-slate-700 border border-orange-100"><strong>Ëæ®Ë≠òÁâπÂæµÔºö</strong><br>Â§ñËßÄÁÇ∫Âæ©Âè§Á¥ÖÁ£öÁâÜËàáÂúìÂΩ¢Êã±ÈñÄË®≠Ë®àÔºåÂëàÁèæ„ÄåËòáÂ∑ûÂ∫≠Âúí„ÄçÈ¢®Ê†º„ÄÇ</div></div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }
        window.showCarGuide = function() {
            document.getElementById('modal-content-area').innerHTML = `<div class="text-left relative"><h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-dashed border-slate-200 pb-3 font-hand tracking-wide">The Safe Rent A Car ÂèñËªäÊåáÂºï</h3><div class="bg-yellow-50 p-4 rounded-xl mb-4 text-sm text-slate-700 shadow-inner border border-yellow-100"><strong>Êé•ÈßÅÂú∞ÈªûÔºö</strong><br>ÊøüÂ∑ûÂúãÈöõÊ©üÂ†¥ GATE 5 Âá∫Âè£Â§ñÔºåÈÅéÊñëÈ¶¨Á∑öËá≥ÁßüËªäÊé•ÈßÅÂçÄ <span class="text-red-500 font-bold text-lg">5-14</span></div><div class="space-y-3 font-hand text-lg text-slate-600"><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">1</span><span>ÊäµÈÅîÊøüÂ∑ûÊ©üÂ†¥ÂæåÔºåË´ãÂæÄ <strong>GATE 5</strong> Âá∫Âè£ÁßªÂãï</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">2</span><span>ÈÅéÊñëÈ¶¨Á∑öÂà∞ÈÅîÂ∞çÈù¢ÁöÑÁßüËªäÊé•ÈßÅËªäÂÅúËªäÂ†¥</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">3</span><span>Â∞ãÊâæ <strong class="text-jeju-orange">5ÂçÄÂüü 14Ëôü (5-14)</strong> Á´ôÁâå</span></div><div class="flex items-start bg-white p-2 rounded-lg shadow-sm border border-slate-100"><span class="bg-slate-200 text-slate-600 w-6 h-6 rounded-full flex-shrink-0 flex items-center justify-center text-xs mr-3 font-sans font-bold mt-0.5">4</span><span>Êê≠‰πòÂØ´Êúâ <strong>"The Safe Rent A Car"</strong> ÁöÑÊé•ÈßÅËªä</span></div></div><div class="mt-4 bg-slate-100 p-3 rounded-lg text-sm text-slate-600 border border-slate-200"><strong>Êé•ÈßÅËªäÁâπÂæµÔºö</strong><br>ÈÄöÂ∏∏ÊòØÁôΩËâ≤ÊàñÈªÉËâ≤ÁöÑÂ∞èÂ∑¥Â£´ÔºåËªäË∫´Âç∞Êúâ The Safe Rent A Car LOGO„ÄÇ</div></div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        window.showEcoLandPrice = function() {
            document.getElementById('modal-content-area').innerHTML = `<div class="text-left"><h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-green-200 pb-2">ECOLAND Á•®ÂÉπË≥áË®ä</h3><div class="space-y-3 font-hand text-lg"><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>Êàê‰∫∫ (19Ê≠≤‰ª•‰∏ä)</span><span class="font-bold">‚Ç©16,000</span></div><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>ÈùíÂ∞ëÂπ¥ (13-18Ê≠≤)</span><span class="font-bold">‚Ç©13,000</span></div><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>ÂÖíÁ´• (3-12Ê≠≤)</span><span class="font-bold">‚Ç©11,000</span></div></div><div class="mt-4 bg-green-50 p-3 rounded-lg text-xs text-green-700">üí° Âª∫Ë≠∞È†êÁïô 2-3 Â∞èÊôÇÈÅäÁé©ÊôÇÈñìÔºåÂ∞èÁÅ´ËªäÊØè 7-12 ÂàÜÈêò‰∏ÄÁè≠„ÄÇ</div></div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }
        window.showRailBikePrice = function() {
            document.getElementById('modal-content-area').innerHTML = `<div class="text-left"><h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-pink-200 pb-2">ÊøüÂ∑ûÈêµÈÅìËá™Ë°åËªä Á•®ÂÉπ</h3><div class="space-y-3 font-hand text-lg"><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>2‰∫∫Â∫ß</span><span class="font-bold">‚Ç©30,000</span></div><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>3‰∫∫Â∫ß</span><span class="font-bold">‚Ç©40,000</span></div><div class="flex justify-between border-b border-dashed border-gray-200 pb-1"><span>4‰∫∫Â∫ß</span><span class="font-bold">‚Ç©48,000</span></div></div><div class="mt-4 bg-pink-50 p-3 rounded-lg text-xs text-pink-700">üí° Ë´ãÊèêÂâç 20 ÂàÜÈêòÊäµÈÅîÂîÆÁ•®ËôïÊèõÁ•®„ÄÇËªäËºõÁÇ∫Ëá™ÂãïÈßïÈßõÔºå‰∏çÁî®Ë≤ªÂäõË∏©ÔºÅ</div></div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }
        window.showFerryInfo = function() {
            document.getElementById('modal-content-area').innerHTML = `
                <div class="text-left relative">
                    <div class="absolute -top-2 -right-2 text-4xl opacity-20 rotate-12">‚õ¥Ô∏è</div>
                    <h3 class="text-xl font-bold text-slate-800 mb-4 text-center border-b-2 border-dashed border-slate-200 pb-3 font-hand tracking-wide">
                        ÁâõÂ≥∂Ê∏°Ëº™ ËàπÁè≠ & Á•®ÂÉπ
                    </h3>
                    <div class="mb-4">
                        <h4 class="font-bold text-slate-700 mb-2 text-sm"><i class="fas fa-clock text-blue-500 mr-1"></i> ËàπÁè≠ÊôÇÂàªË°® (ÊØè30ÂàÜÈêò‰∏ÄÁè≠)</h4>
                        <div class="bg-blue-50 rounded-lg p-3 text-xs leading-relaxed text-slate-600">
                            <p class="font-bold mb-1">ÂéªÁ®ã (ÂüéÂ±±Âá∫Áôº)</p>
                            <p>08:00, 08:30, 09:00 ... 17:00 (Êú´Áè≠)</p>
                            <p class="font-bold mt-2 mb-1">ÂõûÁ®ã (ÁâõÂ≥∂Âá∫Áôº)</p>
                            <p>07:30, 08:00 ... 17:00 (Êú´Áè≠)</p>
                            <p class="text-[10px] text-gray-500 mt-2">* ÂØ¶ÈöõÊôÇÈñì‰æùÁï∂Êó•Â§©Ê∞£ËàáÂ≠£ÁØÄÂèØËÉΩË™øÊï¥ÔºåË´ãÊèêÊó©ÊäµÈÅî„ÄÇ</p>
                        </div>
                    </div>
                    <div class="mb-4">
                        <h4 class="font-bold text-slate-700 mb-2 text-sm"><i class="fas fa-ticket-alt text-green-500 mr-1"></i> ÂæÄËøîÁ•®ÂÉπ (Âê´ÈñÄÁ•®+ËàπË≤ª)</h4>
                        <table class="boat-table w-full text-sm text-slate-600">
                            <thead class="bg-slate-100"><tr><th class="p-2 text-left">Â∞çË±°</th><th class="p-2 text-right">ÂæÄËøîË≤ªÁî®</th></tr></thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr><td class="p-2">Êàê‰∫∫ (19Ê≠≤+)</td><td class="p-2 text-right font-bold">10,500 ÈüìÂÖÉ</td></tr>
                                <tr><td class="p-2">‰∏≠Â≠∏Áîü (13-18Ê≠≤)</td><td class="p-2 text-right font-bold">10,100 ÈüìÂÖÉ</td></tr>
                                <tr><td class="p-2">Â∞èÂ≠∏Áîü (6-12Ê≠≤)</td><td class="p-2 text-right font-bold">3,800 ÈüìÂÖÉ</td></tr>
                                <tr><td class="p-2">ÂÖíÁ´• (2-5Ê≠≤)</td><td class="p-2 text-right font-bold">3,000 ÈüìÂÖÉ</td></tr>
                            </tbody>
                        </table>
                    </div>
                     <div class="mb-4">
                        <h4 class="font-bold text-slate-700 mb-2 text-sm"><i class="fas fa-car text-orange-500 mr-1"></i> ËªäËºõÈÅãË≤ª (ÂæÄËøî)</h4>
                        <table class="boat-table w-full text-sm text-slate-600">
                            <thead class="bg-slate-100"><tr><th class="p-2 text-left">ËªäÂûã</th><th class="p-2 text-right">ÂæÄËøîË≤ªÁî®</th></tr></thead>
                            <tbody class="divide-y divide-slate-100">
                                <tr><td class="p-2">ËºïÂûãËªä (MorningÁ≠â)</td><td class="p-2 text-right font-bold">21,600 ÈüìÂÖÉ</td></tr>
                                <tr><td class="p-2">‰∏≠ÂûãËªä (Avante, Sonata)</td><td class="p-2 text-right font-bold">26,000 ÈüìÂÖÉ</td></tr>
                                <tr><td class="p-2">Â§ßÂûãËªä (Grandeur, K7)</td><td class="p-2 text-right font-bold">30,400 ÈüìÂÖÉ</td></tr>
                                 <tr><td class="p-2">‰ºëÊóÖËªä (Carnival, Starex)</td><td class="p-2 text-right font-bold">37,000 ÈüìÂÖÉ</td></tr>
                            </tbody>
                        </table>
                        <p class="text-[10px] text-red-500 mt-2">* ÁßüË≥ÉËªä‰∏äÂ≥∂ÈúÄÁ¨¶ÂêàÁâπÂÆöÊ¢ù‰ª∂ (Â¶ÇÂ≠ïÂ©¶„ÄÅ65Ê≠≤‰ª•‰∏äÈï∑ËÄÖ„ÄÅ6Ê≠≤‰ª•‰∏ãÂÖíÁ´•Èö®Ë°å)ÔºåË´ãÂãôÂøÖÂÖàÁ¢∫Ë™ç„ÄÇ</p>
                    </div>
                    <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-100 text-xs">
                        <p class="font-bold text-yellow-800 mb-1">‚ö†Ô∏è Êê≠ËàπÂøÖÂÇô</p>
                        <ul class="list-disc pl-4 space-y-1 text-yellow-700"><li>ÊâÄÊúâ‰πòÂÆ¢ÁöÑ<strong>Ë≠∑ÁÖßÊ≠£Êú¨</strong>„ÄÇ</li><li>Â°´ÂØ´<strong>‰πòËàπÁî≥Â†±ÂñÆ</strong> (‰∏ÄÂºèÂÖ©‰ªΩÔºåÂéªÂõûÁ®ãÂêÑ‰∏ÄÂºµ)„ÄÇ</li><li>Âª∫Ë≠∞ÊèêÊó© 30 ÂàÜÈêòÊäµÈÅîÂîÆÁ•®Ëôï„ÄÇ</li></ul>
                    </div>
                </div>
            `;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        window.showUdoPlan = function() {
            const udoSpots = [
                { name: 'Ë•øÊø±ÁôΩÊ≤ô (Sanho Beach)', desc: 'ÈüìÂúãÂîØ‰∏ÄÁöÑÁ¥ÖËóªÂúòÂ°äÊµ∑ÁÅòÔºåÊ≤ôÂ≠êÂÉèÁàÜÁ±≥Ëä±‰∏ÄÊ®£ÁôΩÔºÅ', query: 'Ïö∞ÎèÑ ÏÑúÎπàÎ∞±ÏÇ¨', icon: 'fa-umbrella-beach' },
                { name: '‰∏ãÂè§Ê∞¥Ê¥ûÊµ∑Ê∞¥Êµ¥Â†¥', desc: 'Êµ∑Ê∞¥Ë∂ÖÊ∏ÖÊæàÔºåÈÅ©ÂêàÁé©Ê∞¥„ÄÇÂøÖÂéª Blanc Rocher ÂíñÂï°Âª≥‚òï', query: 'ÌïòÍ≥†ÏàòÎèôÌï¥ÏàòÏöïÏû•', icon: 'fa-water' },
                { name: 'È£õÊèöÂ≥∂ (Biyangdo)', desc: 'ÈÄÄÊΩÆÊôÇÂèØÊ≠•Ë°åÂâçÂæÄÁöÑÂ∞èÂ≥∂ÔºåÊãçÁÖßÊâìÂç°ËÅñÂú∞üì∏', query: 'ÎπÑÏñëÎèÑ Ïó∞Ïú°Íµê', icon: 'fa-camera' },
                { name: 'Ê™¢Ë†ªÊ≤ô (ÈªëÊ≤ôÁÅò)', desc: 'ü•ú ÂøÖÂêÉÔºöJimmy\'s Ëä±ÁîüÂÜ∞Ê∑áÊ∑ãÔºÅÂèØÊê≠Âø´ËâáÁúãÊµ∑ËùïÊ¥û„ÄÇ', query: 'Í≤ÄÎ©ÄÎ†àÌï¥ÏàòÏöïÏû•', icon: 'fa-ice-cream' },
                { name: 'ÁâõÂ≥∂Â≥∞ (Udo Peak)', desc: '‰øØÁû∞ÂÖ®Â≥∂Â£ØÈ∫óÊôØËâ≤ÔºåÊúâÈ´îÂäõÂèØ‰ª•Áà¨‰∏äÂéªÁúãÁúã„ÄÇ', query: 'Ïö∞ÎèÑÎ¥â', icon: 'fa-mountain' }
            ];

            let html = `
                <div class="text-left relative h-full">
                    <div class="absolute top-0 right-0 text-4xl opacity-20">ü•ú</div>
                    <h3 class="text-xl font-bold text-slate-800 mb-3 text-center border-b-2 border-orange-200 pb-2 font-hand tracking-wide">
                        ÁâõÂ≥∂Áí∞Â≥∂ÂøÖÂéªË∑ØÁ∑ö (È†ÜÊôÇÈáù)
                    </h3>
                    
                    <div class="bg-orange-50 p-3 rounded-xl mb-4 text-xs text-orange-800 flex items-center border border-orange-100">
                        <i class="fas fa-motorcycle text-xl mr-3"></i>
                        <div>
                            <strong>‰∫§ÈÄöÂª∫Ë≠∞Ôºö</strong><br>
                            ‰∏ãËàπÂæåÁßü„ÄåÈõªÂãï‰∏âËº™Ëªä„ÄçÊàñÊê≠‰πò„ÄåÊµ∑Â≤∏Âæ™Áí∞Â∑¥Â£´„ÄçÈÅäÁé©ÊúÄÊñπ‰æø„ÄÇ
                        </div>
                    </div>

                    <div class="space-y-0 pl-2">
            `;

            udoSpots.forEach((spot, index) => {
                const navUrl = `https://map.naver.com/p/search/${encodeURIComponent(spot.query)}`;
                html += `
                    <div class="relative pl-6 border-l-2 border-dashed border-slate-300 pb-6 last:border-0 last:pb-0">
                        <div class="absolute -left-[9px] top-0 bg-white border-2 border-orange-400 w-5 h-5 rounded-full flex items-center justify-center text-[10px] font-bold text-orange-500 shadow-sm">${index + 1}</div>
                        <div class="bg-white p-3 rounded-lg shadow-sm border border-slate-100 -mt-1 hover:shadow-md transition-shadow">
                            <div class="flex justify-between items-start mb-1">
                                <h4 class="font-bold text-slate-700 text-sm flex items-center">
                                    <i class="fas ${spot.icon} text-orange-300 mr-2 w-4 text-center"></i>${spot.name}
                                </h4>
                                <a href="${navUrl}" target="_blank" class="text-jeju-blue hover:text-blue-700 text-[10px] bg-blue-50 px-2 py-1 rounded-full whitespace-nowrap ml-2 font-bold flex items-center">
                                    <i class="fas fa-location-arrow mr-1"></i> Â∞éËà™
                                </a>
                            </div>
                            <p class="text-xs text-slate-500 leading-relaxed pl-6">${spot.desc}</p>
                        </div>
                    </div>
                `;
            });

            html += `
                    </div>
                    <div class="mt-6 text-center">
                        <button onclick="closeModal()" class="bg-slate-100 hover:bg-slate-200 text-slate-500 px-6 py-2 rounded-full text-xs font-bold transition-colors">
                            ÈóúÈñâ Close
                        </button>
                    </div>
                </div>
            `;

            document.getElementById('modal-content-area').innerHTML = html;
            document.getElementById('info-modal').classList.remove('hidden');
        }
        
        window.showOlleMarketRecs = function() {
             document.getElementById('modal-content-area').innerHTML = `
                <div class="text-left">
                    <h3 class="text-xl font-bold text-slate-800 mb-3 text-center border-b-2 border-orange-200 pb-2">ÊØèÊó•ÂÅ∂‰æÜÂ∏ÇÂ†¥ ÂøÖÂêÉÊé®Ëñ¶</h3>
                    <div class="space-y-4 font-hand text-lg">
                        <div class="flex items-center bg-orange-50 p-3 rounded-lg">
                            <div class="text-2xl mr-3">üçä</div>
                            <div>
                                <h4 class="font-bold text-slate-800">Ê©òÂ≠êÈ∫ªÁ≥¨ (Omaegi Teok)</h4>
                                <p class="text-xs text-slate-500">Â§ñÁöÆQÂΩàÔºåÂÖßÈ§°ÂåÖËëóÊï¥È°ÜÊøüÂ∑ûÊ©òÂ≠êÔºåÈÖ∏ÁîúÂ•ΩÊªãÂë≥ÔºÅ</p>
                            </div>
                        </div>
                        <div class="flex items-center bg-red-50 p-3 rounded-lg">
                            <div class="text-2xl mr-3">üçñ</div>
                            <div>
                                <h4 class="font-bold text-slate-800">ÈªëË±¨ËÇâÂèØÊ®ÇÈ§Ö</h4>
                                <p class="text-xs text-slate-500">ÈÖ•ËÑÜÂ§ñÁöÆ+Â§öÊ±ÅÈªëË±¨ËÇâÈ§°ÔºåÊéíÈöäÂêçÂ∫ó„ÄÇ</p>
                            </div>
                        </div>
                        <div class="flex items-center bg-yellow-50 p-3 rounded-lg">
                            <div class="text-2xl mr-3">ü¶Ä</div>
                            <div>
                                <h4 class="font-bold text-slate-800">ËûÉËüπÂèØÊ®ÇÈ§Ö (Crab Gratin)</h4>
                                <p class="text-xs text-slate-500">ÊªøÊªøËüπËÇâËàáËµ∑Âè∏ÔºåÁÅ´ÁÉ§ÂæåÈ¶ôÊ∞£ÂõõÊ∫¢„ÄÇ</p>
                            </div>
                        </div>
                        <div class="flex items-center bg-blue-50 p-3 rounded-lg">
                            <div class="text-2xl mr-3">üêü</div>
                            <div>
                                <h4 class="font-bold text-slate-800">ÁîüÈ≠öÁâáÊãºÁõ§</h4>
                                <p class="text-xs text-slate-500">ÁèæÂàáÁîüÈ≠öÁâáÔºåÂÉπÊ†ºÂØ¶ÊÉ†ÔºåÈÅ©ÂêàÂ§ñÂ∏∂ÂõûÈ£ØÂ∫ó„ÄÇ</p>
                            </div>
                        </div>
                        <!-- Êñ∞Â¢û‰º¥ÊâãÁ¶ÆÊé®Ëñ¶ -->
                        <div class="flex items-center bg-purple-50 p-3 rounded-lg border border-purple-100">
                            <div class="text-2xl mr-3">üéÅ</div>
                            <div>
                                <h4 class="font-bold text-purple-800">‰º¥ÊâãÁ¶ÆÊé®Ëñ¶</h4>
                                <p class="text-sm font-bold text-slate-700 mt-1">üìç 188ËôüÊî§‰Ωç</p>
                                <p class="text-xs text-slate-500">Êé®Ëñ¶Ë≥ºË≤∑Ê©òÂ≠ê‰πæ„ÄÅÂ∑ßÂÖãÂäõÁ≠âÁâπËâ≤‰º¥ÊâãÁ¶Æ„ÄÇ</p>
                            </div>
                        </div>
                    </div>
                </div>
            `;
             document.getElementById('info-modal').classList.remove('hidden');
        }

        window.showCafeInfo = function() {
             document.getElementById('modal-content-area').innerHTML = `
                <div class="text-left">
                    <h3 class="text-xl font-bold text-slate-800 mb-3 text-center border-b-2 border-orange-200 pb-2">Ê©òËä±Èñ£Ê®ì Ë≥áË®ä</h3>
                    <div class="mb-4">
                         <h5 class="font-bold text-orange-600 mb-2 font-hand text-lg"><i class="fas fa-clock mr-1"></i> ÁáüÊ•≠Ë≥áË®ä</h5>
                         <div class="bg-white p-3 rounded-lg border border-orange-100 text-sm text-slate-600 shadow-sm">
                            ÊØèÊó• 11:00 - 19:00 <br>
                            <span class="text-xs text-orange-400">(ÊúÄÂæåÈªûÈ§ê 18:15)</span>
                         </div>
                    </div>
                    <div>
                         <h5 class="font-bold text-orange-600 mb-2 font-hand text-lg"><i class="fas fa-coins mr-1"></i> Êî∂Ë≤ªÊñπÂºè</h5>
                         <div class="bg-orange-50 p-3 rounded-lg border border-orange-100 text-sm text-slate-700">
                            <p class="mb-1"><span class="font-bold bg-white text-orange-600 px-2 py-0.5 rounded text-xs shadow-sm">‰ΩéÊ∂à</span> ÊØè‰∫∫‰∏ÄÊùØÈ£≤ÂìÅ (Âê´ÂÖíÁ´•)</p>
                            <ul class="list-disc pl-4 space-y-1 text-xs opacity-90">
                                <li>Ê©òÂ≠êÊãøÈêµ: ‚Ç©7,000</li>
                                <li>Ê©òÂ≠êÊ∞£Ê≥°È£≤: ‚Ç©7,000</li>
                                <li>Ê©òÂ≠êÁæäÁæπÁîúÈªû: ‚Ç©4,000Ëµ∑</li>
                            </ul>
                         </div>
                    </div>
                </div>
            `;
             document.getElementById('info-modal').classList.remove('hidden');
        }

        window.showLandingDiningInfo = function() {
            document.getElementById('modal-content-area').innerHTML = `
                <div class="text-left">
                    <h3 class="text-xl font-bold text-slate-800 mb-3 text-center border-b-2 border-yellow-200 pb-2">ËóçÈºéËá™Âä©ÊôöÈ§ê Ë≥áË®ä</h3>
                    <div class="mb-4">
                        <h5 class="font-bold text-yellow-700 mb-2 font-hand text-lg"><i class="fas fa-clock mr-1"></i> ÁáüÊ•≠ÊôÇÈñì</h5>
                        <div class="bg-white p-3 rounded-lg border border-yellow-200 text-sm text-slate-600 shadow-sm">
                            <p>ÊôöÈ§êÊôÇÊÆµÔºö18:00 - 21:30 (ÊØèÊó•)</p>
                        </div>
                    </div>
                    <div>
                        <h5 class="font-bold text-yellow-700 mb-2 font-hand text-lg"><i class="fas fa-receipt mr-1"></i> ÂÉπÊ†ºË°® (Âê´Á®Ö)</h5>
                        <div class="bg-yellow-50 p-3 rounded-lg border border-yellow-100 text-sm text-slate-700">
                            <div class="grid grid-cols-2 gap-3 mb-2 font-bold text-base">
                                <div class="flex justify-between border-b border-yellow-200 pb-1">
                                    <span>Êàê‰∫∫</span><span>‚Ç©149,000</span>
                                </div>
                                <div class="flex justify-between border-b border-yellow-200 pb-1">
                                    <span>ÂÖíÁ´•(12Ê≠≤‚Üì)</span><span>‚Ç©75,000</span>
                                </div>
                            </div>
                            <div class="text-[11px] text-red-500 mt-2">
                                <i class="fas fa-exclamation-circle"></i> 36ÂÄãÊúà‰ª•‰∏ãÂπºÂÖíÂÖçË≤ª (ÈúÄÂá∫Á§∫Ë≠âÊòéÊñá‰ª∂)
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        window.showThemeParkInfo = function() {
            document.getElementById('modal-content-area').innerHTML = `
                <div class="text-left">
                    <h3 class="text-xl font-bold text-slate-800 mb-3 text-center border-b-2 border-purple-200 pb-2">Á•ûË©±‰∏ªÈ°åÂÖ¨Âúí ÊîªÁï•</h3>
                    
                    <div class="mb-4">
                        <h5 class="font-bold text-purple-700 mb-2 font-hand text-lg"><i class="fas fa-clock mr-1"></i> ÁáüÊ•≠Ë≥áË®ä</h5>
                        <div class="bg-purple-50 p-3 rounded-lg text-sm text-slate-700">
                            <p>ÊØèÊó• 10:00 - 20:00</p>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h5 class="font-bold text-purple-700 mb-2 font-hand text-lg"><i class="fas fa-ticket-alt mr-1"></i> Big 3 Âà∏‰ΩøÁî®ÊñπÂºè</h5>
                        <div class="bg-white border-2 border-dashed border-purple-200 p-3 rounded-lg text-sm text-slate-600">
                            <ul class="list-disc pl-4 space-y-1">
                                <li>ÊÜëÊÜëË≠âÊèõÁ•®ÊàñÁõ¥Êé•ÊéÉÊèèÂÖ•Â†¥„ÄÇ</li>
                                <li>ÂèØ‰ªªÈÅ∏ÂúíÂçÄÂÖß <strong>3È†Ö</strong> ÈÅäÊ®ÇË®≠ÊñΩÈ´îÈ©ó„ÄÇ</li>
                                <li>ÈÅ©Âêà‰∏çÊÉ≥Áé©Êï¥Â§©ÔºåÂè™ÊÉ≥È´îÈ©óÈáçÈªûË®≠ÊñΩÁöÑÊóÖÂÆ¢„ÄÇ</li>
                            </ul>
                        </div>
                    </div>

                    <div>
                         <h5 class="font-bold text-purple-700 mb-2 font-hand text-lg"><i class="fas fa-child mr-1"></i> Â∞èÂ≠©ËÉΩÁé©ÁöÑË®≠ÊñΩ (Ë∫´È´òÈôêÂà∂)</h5>
                         <div class="space-y-2 text-xs text-slate-600">
                            <div class="flex items-center justify-between border-b border-purple-100 pb-1">
                                <span><i class="fas fa-train text-purple-400 mr-1"></i>ÈÄóÈÄóËü≤‰∏ñÁïåÂø´Ëªä</span>
                                <span class="font-bold text-green-600">90cm+</span>
                            </div>
                             <div class="flex items-center justify-between border-b border-purple-100 pb-1">
                                <span><i class="fas fa-film text-purple-400 mr-1"></i>ÊóãËΩâÂÖ¨Âúí4DÂΩ±Èô¢</span>
                                <span class="font-bold text-green-600">100cm+</span>
                            </div>
                            <div class="flex items-center justify-between border-b border-purple-100 pb-1">
                                <span><i class="fas fa-horse text-purple-400 mr-1"></i>ÈÄóÈÄóËü≤ÊóãËΩâÊú®È¶¨</span>
                                <span class="font-bold text-green-600">105cm+</span>
                            </div>
                             <div class="flex items-center justify-between border-b border-purple-100 pb-1">
                                <span><i class="fas fa-rocket text-purple-400 mr-1"></i>ÈÄóÈÄóËü≤Â§™Á©∫ÂÜíÈö™</span>
                                <span class="font-bold text-orange-500">115cm+</span>
                            </div>
                             <div class="flex items-center justify-between border-b border-purple-100 pb-1">
                                <span><i class="fas fa-music text-purple-400 mr-1"></i>ËàûÂãïÂ•ßÊñØÂç°</span>
                                <span class="font-bold text-orange-500">120cm+</span>
                            </div>
                             <div class="flex items-center justify-between border-b border-purple-100 pb-1">
                                <span><i class="fas fa-dragon text-purple-400 mr-1"></i>Â•ßÊñØÂç°‰πãÈæç</span>
                                <span class="font-bold text-orange-500">120cm+</span>
                            </div>
                             <div class="flex items-center justify-between border-b border-purple-100 pb-1">
                                <span><i class="fas fa-plane text-purple-400 mr-1"></i>È£õË°åÈÄóÈÄóËü≤</span>
                                <span class="font-bold text-red-500">130cm+</span>
                            </div>
                         </div>
                    </div>
                </div>
            `;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        window.showPororoInfo = function() {
            document.getElementById('modal-content-area').innerHTML = `
                <div class="text-left">
                    <h3 class="text-xl font-bold text-slate-800 mb-3 text-center border-b-2 border-blue-200 pb-2">Pororo & Tayo Ê®ÇÂúí</h3>
                    
                    <div class="mb-4">
                        <h5 class="font-bold text-blue-600 mb-2 font-hand text-lg"><i class="fas fa-clock mr-1"></i> ÁáüÊ•≠Ë≥áË®ä</h5>
                        <div class="bg-blue-50 p-3 rounded-lg text-sm text-slate-700">
                            <p>ÊØèÊó• 10:00 - 18:00</p>
                            <p class="text-xs text-slate-500 mt-1">(Êà∂Â§ñË®≠ÊñΩË¶ñÂ§©Ê∞£ÈñãÊîæ)</p>
                        </div>
                    </div>

                    <div>
                        <h5 class="font-bold text-blue-600 mb-2 font-hand text-lg"><i class="fas fa-ticket-alt mr-1"></i> Á•®ÂÉπÂèÉËÄÉ (ÂÖ®Êó•ÈÄöÁ•®)</h5>
                        <div class="bg-white border-2 border-dashed border-blue-200 p-3 rounded-lg text-sm text-slate-600">
                             <div class="grid grid-cols-2 gap-2 mb-2">
                                <div class="border-b border-gray-100 pb-1 flex justify-between">
                                    <span>ÂÖíÁ´•</span><span class="font-bold text-slate-800">‚Ç©40,000</span>
                                </div>
                                <div class="border-b border-gray-100 pb-1 flex justify-between">
                                    <span>Êàê‰∫∫</span><span class="font-bold text-slate-800">‚Ç©30,000</span>
                                </div>
                            </div>
                            <div class="text-[10px] text-slate-400 mt-2">
                                * ÂÖíÁ´•Á•®ÊØîÊàê‰∫∫Ë≤¥ÊòØÂõ†ÁÇ∫Ë®≠ÊñΩ‰∏ªË¶ÅÊòØÁµ¶Â∞èÂ≠©Áé©ÁöÑ<br>
                                * ‰∏ãÂçà 3 ÈªûÂæåÂÖ•Â†¥ÊúâÂÑ™ÊÉ†ÂÉπ (After 3)
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        window.showSuksungdoInfo = function() {
            document.getElementById('modal-content-area').innerHTML = `
                <div class="text-left relative">
                    <div class="absolute -top-2 -right-2 text-4xl opacity-20 rotate-12">ü•©</div>
                    <h3 class="text-xl font-bold text-slate-800 mb-3 text-center border-b-2 border-red-200 pb-2">ÁÜüÊàêÂà∞ (Suksungdo)</h3>
                    
                    <div class="bg-red-50 p-3 rounded-xl mb-4 border border-red-100 text-sm text-red-800 shadow-sm">
                        <div class="flex items-center mb-1">
                            <i class="fas fa-check-circle mr-2 text-lg"></i>
                            <span class="font-bold text-lg">Â∑≤Ë®Ç‰Ωç 18:30</span>
                        </div>
                        <div class="ml-6 text-xs bg-white inline-block px-2 py-1 rounded border border-red-200">
                            Â∑≤‰ªòË®ÇÈáë: <strong>30,000 ÈüìÂÖÉ</strong>
                        </div>
                    </div>

                    <div class="mb-4">
                        <h5 class="font-bold text-slate-700 mb-1 font-hand text-lg"><i class="fas fa-clock mr-1"></i> ÁáüÊ•≠ÊôÇÈñì</h5>
                        <p class="text-sm text-slate-600 pl-2">11:30 - 22:00 (ÊúÄÂæåÈªûÈ§ê 21:15)</p>
                    </div>

                    <div>
                        <h5 class="font-bold text-slate-700 mb-2 font-hand text-lg"><i class="fas fa-utensils mr-1"></i> ÂøÖÈªûËèúÂñÆ & ÂÉπÊ†º</h5>
                        <div class="space-y-2 text-sm text-slate-600">
                             <div class="flex justify-between border-b border-dashed border-gray-200 pb-1">
                                <span>960 ÁÜüÊàêÂ∏∂È™®ÈáåËÑä</span>
                                <span class="font-bold">‚Ç©38,000</span>
                            </div>
                            <div class="flex justify-between border-b border-dashed border-gray-200 pb-1">
                                <span>720 ÁÜüÊàê‰ª•Ë•øÁµê‰∫îËä±ËÇâ</span>
                                <span class="font-bold">‚Ç©22,000</span>
                            </div>
                             <div class="flex justify-between border-b border-dashed border-gray-200 pb-1">
                                <span>ÁÜüÊàêË±¨È†∏ËÇâ</span>
                                <span class="font-bold">‚Ç©22,000</span>
                            </div>
                            <div class="flex justify-between border-b border-dashed border-gray-200 pb-1">
                                <span>ÂÆ∂ÂÇ≥Ê≥°ËèúÊπØ</span>
                                <span class="font-bold">‚Ç©7,000</span>
                            </div>
                        </div>
                        <p class="text-[10px] text-slate-400 mt-2">* ÊØèÊó•ÈôêÈáèÈÉ®‰ΩçÂª∫Ë≠∞Êó©ÈªûÁ¢∫Ë™ç</p>
                    </div>
                </div>
            `;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        // Êñ∞Â¢û Day 7 Modal Function
        window.showJungangRecs = function() {
             document.getElementById('modal-content-area').innerHTML = `
                <div class="text-left">
                    <h3 class="text-xl font-bold text-slate-800 mb-3 text-center border-b-2 border-red-200 pb-2">‰∏≠Â§ÆÂú∞‰∏ãË°ó Âº∑ÂäõÊé®Ëñ¶</h3>
                    <div class="bg-red-50 p-4 rounded-xl text-center text-slate-600 font-hand text-lg border border-red-100">
                        <i class="fas fa-edit text-4xl mb-2 text-red-300"></i><br>
                        <span class="font-bold text-red-500">ÂÖßÂÆπÊí∞ÂØ´‰∏≠...</span><br>
                        <span class="text-sm">(Á®çÂæåË£ú‰∏äÊé®Ëñ¶Â∫óÂÆ∂ËàáÂøÖË≤∑Ê∏ÖÂñÆ)</span>
                    </div>
                </div>
            `;
             document.getElementById('info-modal').classList.remove('hidden');
        }

        async function fetchRate() {
            const el = document.getElementById('rate-display');
            try {
                const res = await fetch('https://api.exchangerate-api.com/v4/latest/TWD');
                const data = await res.json();
                currentExchangeRate = data.rates.KRW;
                if(document.getElementById('krw-val')) document.getElementById('krw-val').innerText = currentExchangeRate.toFixed(2);
                if(document.getElementById('calc-twd') && document.getElementById('calc-twd').value === "") convertCurrency('twd');
                
                // Update cheat sheet
                const listEl = document.getElementById('rate-cheat-sheet');
                if (listEl) {
                    const amounts = [1000, 5000, 10000, 30000, 50000];
                    let html = '';
                    amounts.forEach(krw => {
                        const twd = Math.round(krw / currentExchangeRate);
                        html += `<li class="flex justify-between items-center border-b border-dashed border-yellow-300 pb-1 last:border-0"><span class="font-bold text-slate-700">‚Ç© ${krw.toLocaleString()}</span><span class="text-xs text-slate-400">‚âà</span><span class="font-bold text-jeju-orange">NT$ ${twd.toLocaleString()}</span></li>`;
                    });
                    listEl.innerHTML = html;
                }
            } catch (e) { console.error(e); }
        }
        function convertCurrency(source) {
            if(!currentExchangeRate) return;
            const twd = document.getElementById('calc-twd'), krw = document.getElementById('calc-krw');
            if(source==='twd') krw.value=(parseFloat(twd.value)*currentExchangeRate).toFixed(0)||'';
            else twd.value=(parseFloat(krw.value)/currentExchangeRate).toFixed(0)||'';
        }

        async function fetchWeather() {
            if(!document.getElementById('weather-widget')) return;
            if(weatherDataCache) { renderWeatherWidget(weatherDataCache); return; }
            try {
                const url = "https://api.open-meteo.com/v1/forecast?latitude=33.4996&longitude=126.5312&current=temperature_2m,relative_humidity_2m,apparent_temperature,weather_code,wind_speed_10m&daily=weather_code,temperature_2m_max,temperature_2m_min,precipitation_probability_max,uv_index_max&timezone=Asia%2FSeoul&forecast_days=8";
                const res = await fetch(url);
                const data = await res.json();
                weatherDataCache = data;
                renderWeatherWidget(data);
            } catch (e) { console.error(e); }
        }
        function renderWeatherWidget(data) {
            if(!document.getElementById('weather-widget')) return;
            const current = data.current;
            document.getElementById('curr-temp').innerText = `${current.temperature_2m}¬∞`;
            document.getElementById('weather-loading').style.display='none';
            document.getElementById('weather-content').classList.remove('hidden');

            document.getElementById('w-wind').innerText = `${current.wind_speed_10m} km/h`;
            document.getElementById('w-hum').innerText = `${current.relative_humidity_2m}%`;
            document.getElementById('w-feel').innerText = `${current.apparent_temperature}¬∞`;
            document.getElementById('w-uv').innerText = data.daily.uv_index_max[0];
            
            // OOTD
            const tipEl = document.getElementById('weather-tip');
            if (tipEl) {
                let tip = "";
                if (current.apparent_temperature < 5) tip = "Ë∂ÖÁ¥öÂÜ∑ÔºÅÁæΩÁµ®Ë°£„ÄÅÂúçÂ∑æ„ÄÅÊöñÊöñÂåÖÊòØÂøÖÈ†àÁöÑÔºÅüß§";
                else if (current.apparent_temperature < 10) tip = "ÊúâÈªûÂÜ∑ÂñîÔºåÂª∫Ë≠∞Ê¥ãËî•ÂºèÁ©øÊê≠ÔºåÂ∏∂‰ª∂ÂéöÂ§ñÂ•ó„ÄÇüß•";
                else if (current.apparent_temperature < 15) tip = "Ê∂ºÁàΩËàíÈÅ©ÔºåÈï∑Ë¢ñË°õË°£ÊàñÈáùÁπîË°´ÂâõÂ•Ω„ÄÇüëï";
                else tip = "Â§©Ê∞£‰∏çÈåØÔºåËºï‰æøÁ©øËëóÂç≥ÂèØÔºÅüëü";
                if ([51, 53, 55, 61, 63, 65, 80, 81, 82].includes(current.weather_code)) tip += " <br>‚ö†Ô∏è ÊúÉ‰∏ãÈõ®ÔºåË®òÂæóÂ∏∂ÂÇòÔºÅ‚òÇÔ∏è";
                tipEl.innerHTML = tip;
            }

            let html = '';
            for(let i=0;i<7;i++) {
                const d = data.daily;
                const date = moment(d.time[i]).format('MM/DD');
                let icon = 'fa-sun text-orange-400';
                if(d.weather_code[i] > 3) icon = 'fa-cloud text-gray-400';
                if(d.weather_code[i] > 50) icon = 'fa-cloud-rain text-blue-400';
                
                html += `
                <div onclick="showWeatherDetail(${i})" class="flex-shrink-0 w-20 flex flex-col items-center p-2 bg-white border-2 border-dashed border-slate-200 rounded-xl snap-center mx-1 active:scale-95 transition-transform cursor-pointer hover:border-jeju-blue">
                    <span class="text-sm font-hand font-bold text-slate-600">${date}</span>
                    <i class="fas ${icon} text-xl my-2"></i>
                    <span class="text-[10px] font-bold text-slate-500">${d.temperature_2m_min[i]}¬∞~${d.temperature_2m_max[i]}¬∞</span>
                </div>`;
            }
            document.getElementById('forecast-container').innerHTML = html;
        }
        window.showWeatherDetail = function(i) {
            if(!weatherDataCache) return;
            const d = weatherDataCache.daily;
            document.getElementById('modal-content-area').innerHTML = `<div class="mb-4"><div class="text-2xl font-bold">${moment(d.time[i]).format('MM/DD')}</div><div class="text-4xl">${d.temperature_2m_min[i]}¬∞ - ${d.temperature_2m_max[i]}¬∞</div></div><div class="grid grid-cols-2 gap-3 text-left bg-slate-50 p-4 rounded-xl text-sm"><div>ÈôçÈõ®: ${d.precipitation_probability_max[i]}%</div><div>Á¥´Â§ñÁ∑ö: ${d.uv_index_max[i]}</div></div><div class="mt-4 text-xs text-slate-400">ÈªûÊìäËÉåÊôØÈóúÈñâ</div>`;
            document.getElementById('info-modal').classList.remove('hidden');
        }

        window.toggleDetails = function(id) {
            const el = document.getElementById(id);
            const icon = document.getElementById(id + '-icon');
            if(el.classList.contains('show')) { el.classList.remove('show'); if(icon) icon.classList.remove('rotate-180'); }
            else { el.classList.add('show'); if(icon) icon.classList.add('rotate-180'); }
        }
        window.updateImage = function(wrapperId, input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    const imgEl = document.querySelector(`#${wrapperId} img`);
                    if(imgEl) imgEl.src = e.target.result;
                    try { localStorage.setItem('img-' + wrapperId, e.target.result); } catch(e) {}
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        function renderPassengerTable(list) {
            return `<div class="overflow-x-auto"><table class="w-full text-sm text-left mt-2 border-collapse"><thead class="text-xs text-slate-500 uppercase bg-slate-50 border-b"><tr><th class="px-2 py-2 w-1/2">Name</th><th class="px-1 py-2 text-center w-1/4">Seat</th><th class="px-1 py-2 text-right w-1/4">KG</th></tr></thead><tbody>${list.map(p=>`<tr class="bg-white border-b hover:bg-yellow-50"><td class="px-2 py-2 font-medium text-slate-900 text-xs break-all">${p.name}</td><td class="px-1 py-2 text-center font-hand font-bold text-lg text-jeju-blue">${p.seat}</td><td class="px-1 py-2 text-right font-hand font-bold text-slate-600">${p.bag}</td></tr>`).join('')}<tr class="bg-slate-50 font-bold text-xs"><td class="px-2 py-2 text-right" colspan="2">Total:</td><td class="px-1 py-2 text-right">${list.reduce((acc, curr) => acc + parseInt(curr.bag), 0)} KG</td></tr></tbody></table></div>`;
        }

        function getContent(id) {
            const header = (text) => `<div class="mb-6 text-center"><h2 class="washi-tape-title text-xl font-bold text-slate-700 font-hand tracking-wide">${text}</h2></div>`;
            const bookingItem = (title, sub, imgId, iconClass, colorClass, defaultFilenames) => {
                const filenames = Array.isArray(defaultFilenames) ? defaultFilenames : [defaultFilenames];
                const fallbackImg = "https://images.unsplash.com/photo-1548115184-bc6544d06a58?ixlib=rb-4.0.3&auto=format&fit=crop&w=600&q=80";
                const imagesHtml = filenames.map((filename, index) => {
                    const imgSrc = localStorage.getItem(`img-${imgId}-${index}`) || filename; 
                    return `<div class="flex-1 min-w-[200px] p-2 flex flex-col items-center relative" id="${imgId}-${index}"><div class="inline-block p-1 bg-white shadow-md transform ${index % 2 === 0 ? 'rotate-0' : '-rotate-0'} relative group w-full border border-gray-100"><img src="${imgSrc}" onerror="this.src='${fallbackImg}'" class="rounded w-full h-auto" alt="Booking Image"></div><input type="file" id="file-${imgId}-${index}" style="display: none;" accept="image/*" onchange="updateImage('${imgId}-${index}', this)"><div class="mt-2"><button onclick="event.stopPropagation(); document.getElementById('file-${imgId}-${index}').click();" class="text-[10px] bg-slate-200 hover:bg-slate-300 text-slate-600 px-3 py-1 rounded-full transition-colors font-bold whitespace-nowrap"><i class="fas fa-camera mr-1"></i> Êõ¥Êèõ</button></div><div class="text-[9px] text-slate-400 mt-2 break-all text-center leading-tight"><i class="fas fa-file-image mr-1"></i>${filename}</div></div>`;
                }).join('');
                return `<div class="bg-white rounded-xl shadow-sm border-2 border-slate-100 overflow-hidden cursor-pointer hover:border-${colorClass}-400 transition-all mb-4 relative" onclick="toggleDetails('${imgId}')"><div class="p-3 flex items-center justify-between"><div class="flex items-center gap-3"><div class="bg-${colorClass}-100 text-${colorClass}-500 w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center text-lg border-2 border-white shadow-sm"><i class="${iconClass}"></i></div><div><h3 class="font-bold text-lg font-hand text-slate-700 tracking-wide leading-tight">${title}</h3><p class="text-xs text-slate-400 font-sans border-b border-dotted border-${colorClass}-200 inline-block">${sub}</p></div></div><i id="${imgId}-icon" class="fas fa-chevron-down text-slate-400 transition-transform duration-300"></i></div><div id="${imgId}" class="details-expand bg-paper border-t-2 border-dashed border-slate-200"><div class="p-3"><div class="flex flex-wrap justify-center -mx-2">${imagesHtml}</div></div></div></div>`;
            };
            const linkItem = (title, sub, iconClass, colorClass, links) => `<div class="bg-white rounded-xl shadow-sm border-2 border-slate-100 overflow-hidden mb-4 relative"><div class="p-3 flex items-center justify-between"><div class="flex items-center gap-3"><div class="bg-${colorClass}-100 text-${colorClass}-500 w-10 h-10 flex-shrink-0 rounded-full flex items-center justify-center text-lg border-2 border-white shadow-sm"><i class="${iconClass}"></i></div><div><h3 class="font-bold text-lg font-hand text-slate-700 tracking-wide leading-tight">${title}</h3><p class="text-xs text-slate-400 font-sans border-b border-dotted border-${colorClass}-200 inline-block">${sub}</p></div></div></div><div class="bg-paper border-t-2 border-dashed border-slate-200 p-3"><div class="flex flex-col gap-2">${links.map(link => `<a href="${link.url}" target="_blank" class="flex items-center p-3 bg-white rounded-lg border border-slate-200 shadow-sm hover:shadow-md hover:border-${colorClass}-300 transition-all group"><div class="bg-${colorClass}-50 text-${colorClass}-500 w-8 h-8 rounded-full flex items-center justify-center mr-3 group-hover:bg-${colorClass}-100"><i class="fas fa-link"></i></div><span class="font-bold text-slate-700 group-hover:text-${colorClass}-600">${link.text}</span><i class="fas fa-external-link-alt ml-auto text-slate-300 group-hover:text-${colorClass}-400 text-xs"></i></a>`).join('')}</div></div></div>`;
            const prepGroup = (title, items, color) => `<div class="mb-4 bg-white p-4 rounded-lg shadow-sm relative overflow-hidden"><div class="absolute inset-0 pointer-events-none opacity-30" style="background-image: linear-gradient(#e5e7eb 1px, transparent 1px); background-size: 100% 24px;"></div><div class="relative inline-block bg-${color}-100 px-3 py-1 rounded mb-3 transform -rotate-1 shadow-sm border border-${color}-200"><span class="font-bold text-${color}-600 font-hand text-lg tracking-wider">${title}</span></div><div class="relative space-y-2 pl-1">${items.map(item => `<label class="flex items-center cursor-pointer hover:bg-${color}-50 p-1 rounded transition-colors"><input type="checkbox" class="custom-checkbox text-${color}-500 mr-2 flex-shrink-0"><span class="text-slate-600 font-hand text-base pt-1 leading-none">${item}</span></label>`).join('')}</div></div>`;
            const dayPlanner = (dayNum, dateStr) => `${header(`Day ${dayNum} : ${dateStr}`)}<div class="bg-yellow-100 p-3 rounded-lg shadow-sm transform -rotate-1 mb-6 border border-yellow-200 relative"><div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-20 h-4 bg-red-100 opacity-60 rounded-sm"></div><h3 class="font-bold text-base text-orange-800 text-center font-hand"><i class="fas fa-star mr-1"></i> Highlights</h3><p class="text-slate-700 text-center mt-1 font-hand text-lg">Coming Soon...</p></div>`;

            switch(id) {
                case 'intro':
                    return `${header('Jeju Best Spots ÂøÖÂéªÊôØÈªû')}
                    <div class="grid grid-cols-2 gap-4 pb-10">
                        ${allSpots.map((spot, index) => `
                            <div class="polaroid-card transform ${index % 2 === 0 ? 'rotate-1' : '-rotate-1'} hover:rotate-0 transition-transform duration-300">
                                <div class="masking-tape ${spot.tape}"></div>
                                <div class="relative">
                                    <img src="${spot.img}" class="w-full aspect-video object-cover rounded-sm mb-2 filter sepia-[.1]">
                                    <div class="doodle-sticker" style="bottom:-10px; right:-10px; transform: rotate(10deg);">${spot.sticker}</div>
                                </div>
                                <h4 class="font-bold text-slate-700 text-lg font-hand leading-tight mb-1">${spot.name}</h4>
                                <p class="text-xs text-slate-500 font-sans leading-relaxed border-t border-dashed border-gray-200 pt-1">${spot.desc}</p>
                            </div>
                        `).join('')}
                    </div>`;
                    
                case 'flight':
                    return `${header('Flight Info Ëà™Áè≠Ë≥áË®ä')}${renderBookingInfo()}<div class="flex flex-col gap-4"><div class="bg-white rounded-xl shadow-md border-2 border-slate-100 overflow-hidden cursor-pointer" onclick="toggleDetails('outbound-details')"><div class="p-4 relative"><div class="absolute right-0 top-0 bg-jeju-orange text-white px-3 py-1 rounded-bl-lg font-bold text-xs z-10">ÂéªÁ®ã Outbound</div><div class="flex justify-between items-center text-center mt-2"><div class="text-2xl font-hand font-bold text-slate-800">16:00 <span class="text-xs text-slate-400 block font-sans">KHH</span></div><div class="flex-1 px-2"><div class="border-b-2 border-dashed border-slate-300 relative h-1 w-full my-2"></div><div class="flex justify-between text-[10px] text-slate-500 font-bold uppercase"><span>Tigerair</span><span class="text-jeju-orange">IT 670</span></div></div><div class="text-2xl font-hand font-bold text-slate-800">19:25 <span class="text-xs text-slate-400 block font-sans">CJU</span></div></div></div><div id="outbound-details" class="details-expand bg-orange-50 px-4"><div class="pb-4 pt-2">${renderPassengerTable(passengersOutbound)}</div></div></div><div class="bg-white rounded-xl shadow-md border-2 border-slate-100 overflow-hidden cursor-pointer" onclick="toggleDetails('inbound-details')"><div class="p-4 relative"><div class="absolute right-0 top-0 bg-jeju-blue text-white px-3 py-1 rounded-bl-lg font-bold text-xs z-10">ÂõûÁ®ã Inbound</div><div class="flex justify-between items-center text-center mt-2"><div class="text-2xl font-hand font-bold text-slate-800">20:15 <span class="text-xs text-slate-400 block font-sans">CJU</span></div><div class="flex-1 px-2"><div class="border-b-2 border-dashed border-slate-300 relative h-1 w-full my-2"></div><div class="flex justify-between text-[10px] text-slate-500 font-bold uppercase"><span>Tigerair</span><span class="text-jeju-blue">IT 671</span></div></div><div class="text-2xl font-hand font-bold text-slate-800">21:50 <span class="text-xs text-slate-400 block font-sans">KHH</span></div></div></div><div id="inbound-details" class="details-expand bg-blue-50 px-4"><div class="pb-4 pt-2">${renderPassengerTable(passengersInbound)}</div></div></div></div>`;
                case 'rate': return `
                    ${header('Calculator ÂåØÁéáË®àÁÆóÊ©ü')}
                    
                    <div id="rate-display">
                        <div class="bg-white border-2 border-slate-200 rounded-xl p-4 mb-6 shadow-sm relative overflow-hidden">
                            <div class="absolute top-0 left-0 w-full h-2 bg-stripes-gray opacity-20"></div>
                            
                            <div id="rate-loading" class="text-center font-hand text-xl py-4">ÈÄ£Á∑ö‰∏≠...</div>
                            <div id="rate-result" class="hidden relative z-10">
                                <div class="flex justify-between items-center mb-4 border-b border-dashed border-slate-200 pb-2">
                                    <span class="text-xs text-slate-400 font-bold">TODAY'S RATE</span>
                                    <span class="text-2xl font-black text-jeju-orange font-hand">1 TWD ‚âà <span id="krw-val">--</span> KRW</span>
                                </div>
                                <div class="flex flex-col gap-3">
                                    <div class="relative">
                                        <span class="absolute left-3 top-2.5 text-slate-400 font-bold text-xs">TWD <img src="https://flagcdn.com/w20/tw.png" class="inline w-4 ml-1"></span>
                                        <input type="number" id="calc-twd" placeholder="Ëº∏ÂÖ•Âè∞Âπ£" oninput="convertCurrency('twd')" 
                                            class="w-full pl-16 pr-3 py-2 text-lg font-bold text-slate-700 bg-slate-50 rounded-lg border border-slate-200 focus:outline-none focus:border-jeju-orange transition-all text-right font-hand">
                                    </div>
                                    <div class="text-center text-slate-300 text-xs"><i class="fas fa-exchange-alt rotate-90"></i></div>
                                    <div class="relative">
                                        <span class="absolute left-3 top-2.5 text-slate-400 font-bold text-xs">KRW <img src="https://flagcdn.com/w20/kr.png" class="inline w-4 ml-1"></span>
                                        <input type="number" id="calc-krw" placeholder="Ëº∏ÂÖ•ÈüìÂÖÉ" oninput="convertCurrency('krw')" 
                                            class="w-full pl-16 pr-3 py-2 text-lg font-bold text-jeju-blue bg-blue-50 rounded-lg border border-blue-200 focus:outline-none focus:border-jeju-blue transition-all text-right font-hand">
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Ë≥ºÁâ©ÈÄüÊü•Ë°® (Sticky Note Style) -->
                        <div class="bg-yellow-100 p-4 rounded-lg shadow-md transform rotate-1 border border-yellow-200 relative">
                            <div class="absolute -top-3 left-1/2 transform -translate-x-1/2 w-24 h-6 bg-yellow-200 opacity-50 rotate-1 rounded-sm"></div>
                            <h4 class="font-bold text-yellow-800 mb-2 font-hand text-lg text-center border-b border-yellow-300 pb-1">üõçÔ∏è Ë≥ºÁâ©ÈÄüÊü•Ë°® (Cheat Sheet)</h4>
                            <ul class="space-y-1 text-sm font-hand text-slate-700" id="rate-cheat-sheet">
                                <li class="text-center text-xs text-gray-400">Loading rates...</li>
                            </ul>
                        </div>
                    </div>

                    <!-- Ë®òÂ∏≥Ë°®ÂñÆ -->
                    <div class="bg-white p-5 rounded-xl shadow-sm border border-slate-100 mb-6 mt-6">
                        <h3 class="font-bold text-jeju-green mb-4 flex items-center gap-2 font-hand text-lg">
                            <i class="fas fa-pen"></i> Êñ∞Â¢ûÊîØÂá∫
                        </h3>
                        <div class="space-y-3">
                            <div class="grid grid-cols-2 gap-3">
                                <input type="text" id="expense-name" placeholder="È†ÖÁõÆÂêçÁ®± (Â¶Ç: ÊôöÈ§ê)" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-jeju-green">
                                <select id="expense-category" class="w-full bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-jeju-green">
                                    <option value="food">üçΩÔ∏è È£≤È£ü</option>
                                    <option value="transport">üöó ‰∫§ÈÄö</option>
                                    <option value="hotel">üè® ‰ΩèÂÆø</option>
                                    <option value="shopping">üõçÔ∏è Ë≥ºÁâ©</option>
                                    <option value="fun">üé° Â®õÊ®Ç</option>
                                    <option value="other">üì¶ ÂÖ∂‰ªñ</option>
                                </select>
                            </div>
                            <div class="flex gap-2">
                                <input type="number" id="expense-amount" placeholder="ÈáëÈ°ç (KRW)" class="flex-1 bg-slate-50 border border-slate-200 rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-jeju-green">
                                <button onclick="addExpense()" class="bg-jeju-green text-white px-6 py-2 rounded-lg font-bold hover:bg-green-600 transition shadow-sm font-hand text-lg">
                                    Êñ∞Â¢û
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Ë®òÂ∏≥ÂàóË°®ËàáÁµ±Ë®à -->
                    <div class="space-y-4 pb-20">
                        <div class="flex justify-between items-center px-2">
                            <h3 class="font-bold text-slate-700 font-hand text-lg">Ê∂àË≤ªÁ¥ÄÈåÑ</h3>
                            <div class="text-right">
                                <p class="text-[10px] text-gray-400">Á∏ΩË®àÁ¥Ñ</p>
                                <p class="text-xl font-bold text-jeju-orange font-mono" id="total-twd">NT$ 0</p>
                            </div>
                        </div>
                        
                        <div id="expense-list" class="space-y-2">
                            <!-- JS ÁîüÊàê -->
                            <div class="text-center py-10 opacity-50">
                                <div class="text-4xl mb-2">üí∏</div>
                                <p class="text-sm font-hand">ÈÇÑÊ≤íÊúâÊ∂àË≤ªÁ¥ÄÈåÑÂñîÔºÅ</p>
                            </div>
                        </div>
                    </div>
                `;
                case 'weather': return `
                    ${header('7 Days Weather ‰∏ÄÈÄ±Ê∞£Ë±°')}
                    <div id="weather-widget">
                        <div id="weather-loading" class="text-center py-10 font-hand text-xl text-slate-400">Checking...</div>
                        <div id="weather-content" class="hidden">
                            <!-- Main Weather Card -->
                            <div class="bg-gradient-to-br from-blue-400 to-blue-200 rounded-2xl p-5 text-white shadow-md mb-6 relative overflow-hidden">
                                <div class="absolute top-[-20px] right-[-20px] text-9xl opacity-20 text-white"><i class="fas fa-cloud-sun"></i></div>
                                <div class="z-10 relative">
                                    <h3 class="text-lg font-bold mb-1 font-hand tracking-wider">Jeju City (Today)</h3>
                                    <div class="flex items-end">
                                        <div class="text-6xl font-black font-hand mr-3" id="curr-temp">--¬∞</div>
                                        <div class="text-xl font-medium opacity-90 mb-2" id="curr-desc">--</div>
                                    </div>
                                    
                                    <!-- Detail Grid -->
                                    <div class="grid grid-cols-2 gap-2 mt-4 bg-white/20 backdrop-blur-sm p-3 rounded-lg text-xs">
                                        <div class="flex items-center"><i class="fas fa-wind mr-2 opacity-70"></i> <span id="w-wind">--</span></div>
                                        <div class="flex items-center"><i class="fas fa-tint mr-2 opacity-70"></i> <span id="w-hum">--</span></div>
                                        <div class="flex items-center"><i class="fas fa-sun mr-2 opacity-70"></i> <span id="w-uv">UV --</span></div>
                                        <div class="flex items-center"><i class="fas fa-temperature-high mr-2 opacity-70"></i> È´îÊÑü <span id="w-feel">--</span></div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- Á©øÊê≠‰æøÊ¢ùÁ¥ô -->
                            <div class="bg-pink-50 p-3 rounded-lg shadow-sm border-l-4 border-pink-300 mb-6 flex items-start">
                                <i class="fas fa-tshirt text-pink-400 mt-1 mr-3"></i>
                                <div>
                                    <h4 class="font-bold text-pink-800 text-xs mb-1">OOTD Á©øÊê≠Âª∫Ë≠∞</h4>
                                    <p class="text-xs text-slate-600" id="weather-tip">ËºâÂÖ•‰∏≠...</p>
                                </div>
                            </div>

                            <h3 class="font-bold text-slate-600 mb-2 ml-1 text-sm flex items-center justify-between">
                                <span><i class="fas fa-calendar-week mr-1"></i> Forecast</span>
                                <span class="text-[10px] bg-slate-100 px-2 py-0.5 rounded text-slate-400">Slide ‚Üí</span>
                            </h3>
                            
                            <div class="flex overflow-x-auto gap-3 pb-4 snap-x hide-scrollbar" id="forecast-container">
                                <!-- JS Generated -->
                            </div>
                            
                            <div class="text-[10px] text-slate-400 text-center mt-2">
                                Data: Open-Meteo.com
                            </div>
                        </div>
                    </div>
                `;
                case 'prep': return `${header('Checklist Ë°åÂâçÊ∫ñÂÇô')}<div class="grid grid-cols-1 gap-4">${prepGroup('Âá∫ÁôºÂâçÂøÖÂÅö', ['È†êËæ¶ÁôªÊ©ü (48Â∞èÊôÇÂâç)', 'Á∑ö‰∏äÂ°´ÂØ´ÈõªÂ≠êÂÖ•Â¢ÉÂç° (e-Arrival Card)'], 'red')}${prepGroup('ÂøÖÂÇôË≠â‰ª∂', ['Ë≠∑ÁÖß (ÊïàÊúü6ÂÄãÊúà+)', 'Ê©üÁ•®ÈõªÂ≠êÊ™î', 'Ë®ÇÊàøÊÜëË≠â', 'ÂúãÈöõÈßïÁÖß'], 'blue')}${prepGroup('ÈáëÊµÅËàáÁ∂≤Ë∑Ø', ['WOWPASS Âç°', 'ÈüìÂÖÉÁèæÈáë', '‰ø°Áî®Âç° (Êµ∑Â§ñ)', 'Ë≥ºË≤∑ eSIM Âç°', 'Êº´ÈÅäÈñãÈÄö'], 'yellow')}${prepGroup('ÂÜ¨Â≠£Ë°£Áâ©', ['Èò≤È¢®ÂéöÂ§ñÂ•ó', 'ÁôºÁÜ±Ë°£ x3', 'Â•ΩËµ∞ÁöÑÈûã', 'ÊØõÂ∏Ω„ÄÅÂúçÂ∑æ„ÄÅÊâãÂ•ó', 'ÂÖíÁ´•ÂÇôÁî®Ë°£Áâ©'], 'orange')}${prepGroup('ÈõªÂ≠êÈõúÁâ©', ['ËΩâÊé•È†≠ (4.8mm)', 'Ë°åÂãïÈõªÊ∫ê', 'ÂÖÖÈõªÁ∑ö', 'Èõ®Ë°£/ÂÇò', 'ÊöñÊöñÂåÖ'], 'green')}${prepGroup('Ë¶™Â≠êËàáËó•ÂìÅ', ['ÂÖíÁ´•ÈÄÄÁáí/ËÖ∏ËÉÉËó•', 'ÂÄã‰∫∫Ëó•ÂìÅ', 'ÂÆâÊí´Èõ∂È£ü', 'Ëºï‰æøÊé®Ëªä', 'ÊøïÁ¥ôÂ∑æ'], 'purple')}</div>`;
                case 'booking': return `${header('Booking & Tickets ÊÜëË≠â')}<div class="space-y-4">
                    ${bookingItem('The Safe Rent A Car', 'ÁßüËªäË≥áË®ä', 'img-car', 'fas fa-car', 'green', ['The_Safe_Rent_A_Car_1.png', 'The_Safe_Rent_A_Car_2.png', 'The_Safe_Rent_A_Car_3.png', 'The_Safe_Rent_A_Car_4.png', 'The_Safe_Rent_A_Car_5.png', 'The_Safe_Rent_A_Car_6.png', 'The_Safe_Rent_A_Car_7.png'])}
                    ${bookingItem('„ÄêDay1„ÄëÊøüÂ∑ûGlad MaisonÈ£ØÂ∫ó', 'ÊøüÂ∑ûÂ∏ÇÂçÄ', 'img-h1', 'fas fa-hotel', 'purple', 'Maison_Glad_Voucher.png')}
                    ${bookingItem('„ÄêDay2.3„ÄëÂüéÂ±±Ë≤ùÊñØÁâπÈ£ØÂ∫ó', 'ÂüéÂ±±', 'img-h2', 'fas fa-hotel', 'purple', ['Coop_City_Seongsan_1.png', 'Coop_City_Seongsan_2.png'])}
                    ${bookingItem('„ÄêDay4.5„ÄëÁ•ûË©±‰∏ñÁïå-ËóçÈºé', 'Á•ûË©±‰∏ñÁïå', 'img-h3', 'fas fa-hotel', 'purple', ['Shinhwa_Landing_1.png', 'Shinhwa_Landing_2.png'])}
                    ${bookingItem('„ÄêDay6.7„ÄëÂà©Â•ßÈ£ØÂ∫ó', 'Êñ∞ÊøüÂ∑û', 'img-h4', 'fas fa-hotel', 'purple', ['Hotel_Leo_1.png', 'Hotel_Leo_2.png'])}
                    ${linkItem('Catch Table', 'È§êÂª≥Ë®Ç‰ΩçÈÄ£Áµê', 'fas fa-utensils', 'orange', [{ text: '„ÄêLondon Bagel Museum„Äë', url: 'https://www.catchtable.net/zh-TW/shop/london_bagel_museum_jeju' }, { text: '„ÄêÁÜüÊàêÂà∞ÁáíËÇâ„Äë', url: 'https://www.catchtable.net/zh-TW/shop/suksungdo_jeju' }])}
                    ${bookingItem('Aqua Planet', 'Êµ∑Ê¥ãÈ§®ÈñÄÁ•®', 'img-aqua', 'fas fa-fish', 'blue', ['Aqua_Planet_Ticket_1.png', 'Aqua_Planet_Ticket_2.png'])}
                </div>`;
                
                case 'day1': return renderScheduleList(day1Events, 'Day 1 : 1/30(‰∫î)');
                case 'day2': return renderScheduleList(day2Events, 'Day 2 : 1/31(ÂÖ≠)');
                case 'day3': return renderScheduleList(day3Events, 'Day 3 : 2/01(Êó•)');
                case 'day4': return renderScheduleList(day4Events, 'Day 4 : 2/02(‰∏Ä)');
                case 'day5': return renderScheduleList(day5Events, 'Day 5 : 2/03(‰∫å)');
                case 'day6': return renderScheduleList(day6Events, 'Day 6 : 2/04(‰∏â)');
                case 'day7': return renderScheduleList(day7Events, 'Day 7 : 2/05(Âõõ)');
                case 'day8': return renderScheduleList(day8Events, 'Day 8 : 2/06(‰∫î)');
                default: return '<div>Coming Soon</div>';
            }
        }
        
        // --- Helper Functions ---
        
        function updateRateCheatSheet(rate) {
            const listEl = document.getElementById('rate-cheat-sheet');
            if (!listEl) return;
            const amounts = [1000, 5000, 10000, 30000, 50000];
            let html = '';
            amounts.forEach(krw => {
                const twd = Math.round(krw * rate);
                html += `<li class="flex justify-between items-center border-b border-dashed border-yellow-300 pb-1 last:border-0"><span class="font-bold text-slate-700">‚Ç© ${krw.toLocaleString()}</span><span class="text-xs text-slate-400">‚âà</span><span class="font-bold text-jeju-orange">NT$ ${twd.toLocaleString()}</span></li>`;
            });
            listEl.innerHTML = html;
        }

        function updateOOTD(feelTemp, weatherCode) {
            const tipEl = document.getElementById('weather-tip');
            if (!tipEl) return;
            let tip = "";
            if (feelTemp < 5) tip = "Ë∂ÖÁ¥öÂÜ∑ÔºÅÁæΩÁµ®Ë°£„ÄÅÂúçÂ∑æ„ÄÅÊöñÊöñÂåÖÊòØÂøÖÈ†àÁöÑÔºÅüß§";
            else if (feelTemp < 10) tip = "ÊúâÈªûÂÜ∑ÂñîÔºåÂª∫Ë≠∞Ê¥ãËî•ÂºèÁ©øÊê≠ÔºåÂ∏∂‰ª∂ÂéöÂ§ñÂ•ó„ÄÇüß•";
            else if (feelTemp < 15) tip = "Ê∂ºÁàΩËàíÈÅ©ÔºåÈï∑Ë¢ñË°õË°£ÊàñÈáùÁπîË°´ÂâõÂ•Ω„ÄÇüëï";
            else tip = "Â§©Ê∞£‰∏çÈåØÔºåËºï‰æøÁ©øËëóÂç≥ÂèØÔºÅüëü";
            if ([51, 53, 55, 61, 63, 65, 80, 81, 82].includes(weatherCode)) tip += " <br>‚ö†Ô∏è ÊúÉ‰∏ãÈõ®ÔºåË®òÂæóÂ∏∂ÂÇòÔºÅ‚òÇÔ∏è";
            tipEl.innerHTML = tip;
        }

        function addExpense() {
            const name = document.getElementById('expense-name').value;
            const category = document.getElementById('expense-category').value;
            const amount = parseFloat(document.getElementById('expense-amount').value);
            
            if(!name || !amount) return alert('Ë´ãËº∏ÂÖ•È†ÖÁõÆËàáÈáëÈ°ç');
            
            expenseData.push({
                id: Date.now(),
                name,
                category,
                amount,
                date: new Date().toISOString()
            });
            
            localStorage.setItem('jeju_expenses', JSON.stringify(expenseData));
            renderExpenses();
            
            document.getElementById('expense-name').value = '';
            document.getElementById('expense-amount').value = '';
        }

        function deleteExpense(id) {
            if(confirm('Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÁ≠ÜÁ¥ÄÈåÑÂóéÔºü')) {
                expenseData = expenseData.filter(e => e.id !== id);
                localStorage.setItem('jeju_expenses', JSON.stringify(expenseData));
                renderExpenses();
            }
        }

        function renderExpenses() {
            const listEl = document.getElementById('expense-list');
            const totalEl = document.getElementById('total-twd');
            if(!listEl) return;
            
            if(expenseData.length === 0) {
                listEl.innerHTML = `
                    <div class="text-center py-10 opacity-50">
                        <div class="text-4xl mb-2">üí∏</div>
                        <p class="text-sm font-hand">ÈÇÑÊ≤íÊúâÊ∂àË≤ªÁ¥ÄÈåÑÂñîÔºÅ</p>
                    </div>`;
                totalEl.innerText = 'NT$ 0';
                return;
            }
            
            let html = '';
            let totalTwd = 0;
            
            expenseData.slice().sort((a,b) => new Date(b.date) - new Date(a.date)).forEach((ex) => {
                const rateForTWD = 1 / currentExchangeRate; 
                const twd = Math.round(ex.amount * rateForTWD);
                
                totalTwd += twd;
                
                const catIcons = {
                    food: 'üçΩÔ∏è', transport: 'üöó', hotel: 'üè®', shopping: 'üõçÔ∏è', fun: 'üé°', other: 'üì¶'
                };
                
                html += `
                    <div class="flex justify-between items-center bg-white p-3 rounded-xl shadow-sm border border-slate-100">
                        <div class="flex items-center gap-3">
                            <span class="text-xl">${catIcons[ex.category]}</span>
                            <div>
                                <div class="font-bold text-slate-700 text-sm font-hand">${ex.name}</div>
                                <div class="text-[10px] text-slate-400">${moment(ex.date).format('MM/DD HH:mm')}</div>
                            </div>
                        </div>
                        <div class="flex items-center gap-2">
                            <div class="text-right">
                                <div class="font-bold text-jeju-blue font-mono">‚Ç© ${ex.amount.toLocaleString()}</div>
                                <div class="text-[10px] text-slate-400">‚âà NT$ ${twd.toLocaleString()}</div>
                            </div>
                            <button onclick="deleteExpense(${ex.id})" class="text-slate-300 hover:text-red-400 ml-1 p-1"><i class="fas fa-trash-alt"></i></button>
                        </div>
                    </div>
                `;
            });
            
            listEl.innerHTML = html;
            totalEl.innerText = `NT$ ${totalTwd.toLocaleString()}`;
        }

        async function fetchRate() {
            const el = document.getElementById('rate-display');
            try {
                const res = await fetch('https://api.exchangerate-api.com/v4/latest/TWD');
                const data = await res.json();
                
                const rateForKRW = data.rates.KRW;
                currentExchangeRate = rateForKRW; 

                if(document.getElementById('krw-val')) {
                    document.getElementById('rate-loading').style.display = 'none';
                    document.getElementById('rate-result').classList.remove('hidden');
                    document.getElementById('krw-val').innerText = rateForKRW.toFixed(2);
                }
                
                updateRateCheatSheet(1/rateForKRW);
                
                if(document.getElementById('expense-list')) {
                    renderExpenses();
                }

                if(document.getElementById('calc-twd') && document.getElementById('calc-twd').value === "") convertCurrency('twd');
            } catch (e) { console.error(e); }
        }

        function convertCurrency(source) {
            if(!currentExchangeRate) return;
            const twd = document.getElementById('calc-twd'), krw = document.getElementById('calc-krw');
            if(source==='twd') krw.value=(parseFloat(twd.value)*currentExchangeRate).toFixed(0)||'';
            else twd.value=(parseFloat(krw.value)/currentExchangeRate).toFixed(0)||'';
        }
        
        const originalLoadContent = loadContent;
        loadContent = function(tabId) {
            originalLoadContent(tabId);
            if(tabId === 'rate' && currentExchangeRate) {
                renderExpenses();
            }
        }
    </script>
</body>
</html>